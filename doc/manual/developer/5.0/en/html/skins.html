<html><head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<link rel="icon" type="image/png" sizes="32x32" href="../../../../../../images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../../../images/favicon-16x16.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
$(document).ready(function() {

    // Hint languages to prevent false matches (php for example).
    hljs.configure({
        languages: ['perl', 'javascript', 'xml', 'html', 'css', 'json', 'yaml']
    });

    // programlistings in manuals
    $('pre.programlisting').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    // code snippets in Perl API docs
    $('.pod pre').addClass('perl').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});</script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Skins</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OTRS 5 - Developer Manual"><link rel="up" href="how-it-works.html" title="Chapter 2. OTRS Internals - How it Works"><link rel="prev" href="ch02s03.html" title="Log Mechanism"><link rel="next" href="loader.html" title='The CSS and JavaScript "Loader"'></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Skins</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s03.html">Prev</a> </td><th width="60%" align="center">Chapter 2. OTRS Internals - How it Works</th><td width="20%" align="right"> <a accesskey="n" href="loader.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="skins"></a>Skins</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="skins.html#id-1.3.5.4">Skin Basics</a></span></dt><dt><span class="section"><a href="skins.html#id-1.3.5.5">How skins are loaded</a></span></dt><dt><span class="section"><a href="skins.html#id-1.3.5.6">Creating a New Skin</a></span></dt></dl></div><p>
        Since OTRS 3.0, the visual appearance of OTRS is controlled by "skins".
    </p><p>
        A skin is a set of CSS and image files, which together control how the GUI is
        presented to the user. Skins do not change the HTML content that is generated by OTRS
        (this is what "Themes" do), but they control how it is displayed. With the help
        of modern CSS standards it is possible to change the display thoroughly (e.g.
        repositioning parts of dialogs, hiding elements, ...).
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.3.5.4"></a>Skin Basics</h3></div></div></div><p>
            All skins are in <code class="filename">$OTRS_HOME/var/httpd/htdocs/skins/$SKIN_TYPE/$SKIN_NAME</code>.
            There are two types of skins: agent and customer skins.
        </p><p>
            Each of the agents can select individually, which of the installed agent skins they want to "wear".
        </p><p>
            For the customer interface, a skin has to be selected globally with the config setting
            <code class="literal">Loader::Customer::SelectedSkin</code>. All customers will see this skin.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.3.5.5"></a>How skins are loaded</h3></div></div></div><p>
            It is important to note that the "default" skin will <span class="emphasis"><em>always</em></span> be loaded <span class="emphasis"><em>first</em></span>.
            If the agent selected another skin than the "default" one, then the other one will be loaded only
            <span class="emphasis"><em>after</em></span> the default skin. By "loading" here we mean that OTRS will put tags into the HTML content
            which cause the CSS files to be loaded by the browser. Let's see an example of this:
        </p><p>
            </p><pre class="programlisting">
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css-cache/CommonCSS_179376764084443c181048401ae0e2ad.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/ivory/css-cache/CommonCSS_e0783e0c2445ad9cc59c35d6e4629684.css" /&gt;
            </pre><p>
        </p><p>
            Here it can clearly be seen that the default skin is loaded first, and then the custom skin specified
            by the agent. In this example, we see the result of the activated loader (<code class="literal">Loader::Enabled</code>
            set to 1), which gathers all CSS files, concatenates and minifies them and serves them as one chunk to the
            browser. This saves bandwidth and also reduces the number of HTTP requests. Let's see the same example with the
            Loader turned off:
        </p><p>
            </p><pre class="programlisting">
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Reset.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Default.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Header.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.OverviewControl.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.OverviewSmall.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.OverviewMedium.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.OverviewLarge.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Footer.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Grid.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Form.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Table.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Widget.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.WidgetMenu.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.TicketDetail.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Tooltip.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Dialog.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Print.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Agent.CustomerUser.GoogleMaps.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Agent.CustomerUser.OpenTicket.css" /&gt;
&lt;link rel="stylesheet" href="/otrs-web/skins/Agent/ivory/css/Core.Dialog.css" /&gt;
            </pre><p>
        </p><p>
            Here we can better see the individual files that come from the skins.
        </p><p>
            There are different types of CSS files: common files which must always be loaded,
            and "module-specific" files which are only loaded for special modules within the OTRS
            framework.
        </p><p>
            In addition, it is possible to specify CSS files which only must be loaded on IE7 or
            IE8 (in the case of the customer interface, also IE6). This is unfortunate, but it was
            not possible to develop a modern GUI on these browsers without having special CSS for them.
        </p><p>
            For details regarding the CSS file types, please see the <a class="link" href="loader.html" title='The CSS and JavaScript "Loader"'>section on the Loader</a>.
        </p><p>
            For each HTML page generation, the loader will first take all configured CSS files from the
            default skin, and then for each file look if it is also available in a custom skin (if a custom
            skin is selected) and load them after the default files.
        </p><p>
            That means a) that CSS files in custom skins need to have the same names as in the default skins,
            and b) that a custom skin does not need to have all files of the default skin. That is the big
            advantage of loading the default skin first: a custom skin has all default CSS rules present
            and only needs to change those which should result in a different display. That can often be
            done in a single file, like in the example above.
        </p><p>
            Another effect of this is that you  need to be careful to overwrite all default CSS rules in your
            custom skins that you want to change. Let's see an example:
        </p><p>
            </p><pre class="programlisting">
.Header h1 {
    font-weight: bold;
    color: #000;
}
            </pre><p>
        </p><p>
            This defines special headings inside of the <code class="literal">.Header</code> element as bold, black text. Now if you want to
            change that in your skin to another color and normal text, it is not enough to write this:
        </p><p>
            </p><pre class="programlisting">
.Header h1 {
    color: #F00;
}
            </pre><p>
        </p><p>
            Because the original rule for <code class="literal">font-weight</code> still applies. You need to override it explicitly:
        </p><p>
            </p><pre class="programlisting">
.Header h1 {
    font-weight: normal;
    color: #F00;
}
            </pre><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.3.5.6"></a>Creating a New Skin</h3></div></div></div><p>
            In this section, we will be creating a new agent skin which replaces the default OTRS
            background color (white) with a custom company color (light grey) and the default logo
            by a custome one. Also we will configure that skin to be the one which all agents will
            see by default.
        </p><p>There are only three simple steps we need to take to achieve this goal:
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>create the skin files</p></li><li class="listitem"><p>configure the new logo and</p></li><li class="listitem"><p>make the skin known to the OTRS system.</p></li></ul></div><p>
        </p><p>
            Let's start by creating the files needed for our new skin. First of all, we need to create a new
            folder for this skin (we'll call it <code class="literal">custom</code>). This folder will be
            <code class="filename">$OTRS_HOME/var/httpd/htdocs/skins/Agent/custom</code>.
        </p><p>
            In there, we need to place the new CSS file in a new directory
            <code class="filename">css</code> which defines the new skin's appearance. We'll call it <code class="filename">Core.Default.css</code>
            (remember that it must have the same name as one of the files in the "default" skin). This is the code needed for the CSS file:
        </p><p>
            </p><pre class="programlisting">
body {
    background-color: #c0c0c0; /* not very beautiful but it meets our purpose */
}
            </pre><p>
        </p><p>
            Now follows the second step, adding a new logo and making the new skin known to the OTRS system. For this, we first need
            to place our custom logo (e.g. <code class="filename">logo.png</code>) in a new directory (e.g. <code class="filename">img</code>) in our skin directory.
            Then we need to create a new config file <code class="filename">$OTRS_HOME/Kernel/Config/Files/CustomSkin.xml</code>, which will contain the needed settings
            as follows:
        </p><p>
            </p><pre class="programlisting">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;otrs_config version="1.0" init="Changes"&gt;
    &lt;ConfigItem Name="AgentLogo" Required="0" Valid="1"&gt;
        &lt;Description Translatable="1"&gt;The logo shown in the header of the agent interface. The URL to the image must be a relative URL to the skin image directory.&lt;/Description&gt;
        &lt;Group&gt;Framework&lt;/Group&gt;
        &lt;SubGroup&gt;Frontend::Agent&lt;/SubGroup&gt;
        &lt;Setting&gt;
            &lt;Hash&gt;
                &lt;Item Key="URL"&gt;skins/Agent/custom/img/logo.png&lt;/Item&gt;
                &lt;Item Key="StyleTop"&gt;13px&lt;/Item&gt;
                &lt;Item Key="StyleRight"&gt;75px&lt;/Item&gt;
                &lt;Item Key="StyleHeight"&gt;67px&lt;/Item&gt;
                &lt;Item Key="StyleWidth"&gt;244px&lt;/Item&gt;
            &lt;/Hash&gt;
        &lt;/Setting&gt;
    &lt;/ConfigItem&gt;
    &lt;ConfigItem Name="Loader::Agent::Skin###100-custom" Required="0" Valid="1"&gt;
        &lt;Description Translatable="1"&gt;Custom skin for the development manual.&lt;/Description&gt;
        &lt;Group&gt;Framework&lt;/Group&gt;
        &lt;SubGroup&gt;Frontend::Agent&lt;/SubGroup&gt;
        &lt;Setting&gt;
            &lt;Hash&gt;
                &lt;Item Key="InternalName"&gt;custom&lt;/Item&gt;
                &lt;Item Key="VisibleName"&gt;Custom&lt;/Item&gt;
                &lt;Item Key="Description"&gt;Custom skin for the development manual.&lt;/Item&gt;
                &lt;Item Key="HomePage"&gt;www.yourcompany.com&lt;/Item&gt;
            &lt;/Hash&gt;
        &lt;/Setting&gt;
    &lt;/ConfigItem&gt;
&lt;/otrs_config&gt;
            </pre><p>
        </p><p>
            To make this configuration active, we need to navigate to the SysConfig module in the admin area
            of OTRS (alternatively, you can run the script <code class="filename">$OTRS_HOME/bin/otrs.Console.pl Maint::Config::Rebuild</code>).
            This will regenerate the Perl cache of the XML configuration files, so that our new skin is now known
            and can be selected in the system. To make it the default skin that new agents see before they made their
            own skin selection, edit the SysConfig setting <code class="literal">Loader::Agent::DefaultSelectedSkin</code> and set it to "custom".
        </p><p>
            In conclusion: to create a new skin in OTRS, we had to place the new logo file, and create one CSS and one XML file, resulting
            in three new files:
        </p><p>
            </p><pre class="screen">
$OTRS_HOME/Kernel/Config/Files/CustomSkin.xml
$OTRS_HOME/var/httpd/htdocs/skins/Agent/custom/img/custom-logo.png
$OTRS_HOME/var/httpd/htdocs/skins/Agent/custom/css/Core.Header.css
            </pre><p>
        </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="how-it-works.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="loader.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Log Mechanism </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> The CSS and JavaScript "Loader"</td></tr></table></div></body></html>
