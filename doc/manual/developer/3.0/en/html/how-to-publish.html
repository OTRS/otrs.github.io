<html><head>
<!-- otrs.github.io -->
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>How to Publish your OTRS Extensions</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="OTRS 3.0 - Developer Manual"><link rel="up" href="hacking.html" title="Chapter 2. Hacking OTRS"><link rel="prev" href="how-to-extend.html" title="How to Extend it"><link rel="next" href="upgrading-modules.html" title="How to Upgrade your OTRS Extensions to Newer Versions of OTRS"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">How to Publish your OTRS Extensions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="how-to-extend.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Hacking OTRS</th><td width="20%" align="right"> <a accesskey="n" href="upgrading-modules.html">Next</a></td></tr></table><hr></div><div class="section" title="How to Publish your OTRS Extensions"><div class="titlepage"><div><div><h2 class="title"><a name="how-to-publish"></a>How to Publish your OTRS Extensions</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="how-to-publish.html#idp40405136">Package Management</a></span></dt><dd><dl><dt><span class="section"><a href="how-to-publish.html#package-distribution">Package Distribution</a></span></dt><dd><dl><dt><span class="section"><a href="how-to-publish.html#package-repositiory-index">Package Repository Index</a></span></dt></dl></dd><dt><span class="section"><a href="how-to-publish.html#package-commands">Package Commands</a></span></dt><dd><dl><dt><span class="section"><a href="how-to-publish.html#install">Install</a></span></dt><dt><span class="section"><a href="how-to-publish.html#uninstall">Uninstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#upgrade">Upgrade</a></span></dt><dt><span class="section"><a href="how-to-publish.html#list">List</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="how-to-publish.html#idp40357264">Package Building</a></span></dt><dd><dl><dt><span class="section"><a href="how-to-publish.html#package-spec-file">Package Spec File</a></span></dt><dd><dl><dt><span class="section"><a href="how-to-publish.html#package-name">Name</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-version">Version</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-framework">Framework</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-vendor">Vendor</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-url">URL</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-license">License</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-changelog">ChangeLog</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-description">Description</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-buildhost">BuildHost</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-builddate">BuildDate</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-package-required">PackageRequired</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-module-required">ModuleRequired</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-os">OS (^M)</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-filelist">Filelist</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-database-install">DatabaseInstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-database-upgrade">DatabaseUpgrade</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-database-reinstall">DatabaseReinstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-database-uninstall">DatabaseUninstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-intro-install">IntroInstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-intro-uninstall">IntroUninstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-intro-reinstall">IntroReinstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-intro-upgrade">IntroUpgrade</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-code-install">CodeInstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-code-uninstall">CodeUninstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-code-reinstall">CodeReinstall</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-code-upgrade">CodeUpgrade</a></span></dt></dl></dd><dt><span class="section"><a href="how-to-publish.html#package-example-sopm">Example .sopm</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-build">Package Build</a></span></dt><dt><span class="section"><a href="how-to-publish.html#package-life-cycle">Package Life Cycle - Install/Upgrade/Uninstall</a></span></dt></dl></dd></dl></div><div class="section" title="Package Management"><div class="titlepage"><div><div><h3 class="title"><a name="idp40405136"></a>Package Management</h3></div></div></div><p>
The OPM (OTRS Package Manager) is a mechanism to distribute software packages for
the OTRS framework via http, ftp or file upload.
    </p><p>
For example, the OTRS project offers OTRS modules like a calendar, a file manager
or web mail in OTRS packages via online repositories on our ftp servers.
The packages can be managed (install/upgrade/uninstall) via the admin interface.
    </p><div class="section" title="Package Distribution"><div class="titlepage"><div><div><h4 class="title"><a name="package-distribution"></a>Package Distribution</h4></div></div></div><p>
If you want to create an OPM online repositiory, just tell the OTRS framework
where the location is. Then you will have a new select option in the admin interface.
        </p><pre class="programlisting">
[Kernel/Config.pm]

# Package::RepositoryList
# (repository list)
$Self-&gt;{'Package::RepositoryList'} = {
    'ftp://ftp.example.com/packages/' =&gt; '[Example-Repository]',
};

[...]
        </pre><p>
        </p><div class="section" title="Package Repository Index"><div class="titlepage"><div><div><h5 class="title"><a name="package-repositiory-index"></a>Package Repository Index</h5></div></div></div><p>
In your repository, create an index file for your OPM packages.
OTRS just reads this index file and knows what packages are available.
            </p><pre class="screen">
shell&gt; bin/otrs.PackageManager.pl -a index -d /path/to/repository/ &gt; /path/to/repository/otrs.xml
shell&gt;
            </pre><p>
            </p></div></div><div class="section" title="Package Commands"><div class="titlepage"><div><div><h4 class="title"><a name="package-commands"></a>Package Commands</h4></div></div></div><p>
You can use the following OPM commands over the admin interface or over bin/otrs.PackageManager.pl
to manage admin jobs for OPM packages.
        </p><div class="section" title="Install"><div class="titlepage"><div><div><h5 class="title"><a name="install"></a>Install</h5></div></div></div><p>
Install OPM packages.
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Web:
<a class="ulink" href="http://localhost/otrs/index.pl?Action=AdminPackageManager" target="_top">http://localhost/otrs/index.pl?Action=AdminPackageManager</a>
                    </p></li><li class="listitem"><p>CMD:
                    </p><pre class="screen">
shell&gt; bin/otrs.PackageManager.pl -a install -p /path/to/package.opm
                    </pre><p>
                    </p></li></ul></div><p>
            </p></div><div class="section" title="Uninstall"><div class="titlepage"><div><div><h5 class="title"><a name="uninstall"></a>Uninstall</h5></div></div></div><p>
Uninstall OPM packages.
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Web:
<a class="ulink" href="http://localhost/otrs/index.pl?Action=AdminPackageManager" target="_top">http://localhost/otrs/index.pl?Action=AdminPackageManager</a>
                    </p></li><li class="listitem"><p>CMD:
                    </p><pre class="screen">
shell&gt; bin/otrs.PackageManager.pl -a uninstall -p /path/to/package.opm
                    </pre><p>
                    </p></li></ul></div><p>
            </p></div><div class="section" title="Upgrade"><div class="titlepage"><div><div><h5 class="title"><a name="upgrade"></a>Upgrade</h5></div></div></div><p>
                Upgrade OPM packages.
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Web:
<a class="ulink" href="http://localhost/otrs/index.pl?Action=AdminPackageManager" target="_top">http://localhost/otrs/index.pl?Action=AdminPackageManager</a>
                    </p></li><li class="listitem"><p>CMD:
                    </p><pre class="screen">
shell&gt; bin/otrs.PackageManager.pl -a upgrade -p /path/to/package.opm
                    </pre><p>
                    </p></li></ul></div><p>
            </p></div><div class="section" title="List"><div class="titlepage"><div><div><h5 class="title"><a name="list"></a>List</h5></div></div></div><p>
List all OPM packages.
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Web:
<a class="ulink" href="http://localhost/otrs/index.pl?Action=AdminPackageManager" target="_top">http://localhost/otrs/index.pl?Action=AdminPackageManager</a>
                    </p></li><li class="listitem"><p>CMD:
                    </p><pre class="screen">
shell&gt; bin/otrs.PackageManager.pl -a list
                    </pre><p>
                    </p></li></ul></div><p>
            </p></div></div></div><div class="section" title="Package Building"><div class="titlepage"><div><div><h3 class="title"><a name="idp40357264"></a>Package Building</h3></div></div></div><p>
If you want to create an OPM package (.opm) you need to create a spec file (.sopm)
which includes the properties of the package.
    </p><div class="section" title="Package Spec File"><div class="titlepage"><div><div><h4 class="title"><a name="package-spec-file"></a>Package Spec File</h4></div></div></div><p>
The OPM package is XML based. You can create/edit the .sopm via a text or xml
editor. It contains meta data, a file list and database options.
        </p><div class="section" title="Name"><div class="titlepage"><div><div><h5 class="title"><a name="package-name"></a>Name</h5></div></div></div><p>
The package name (required).
            </p><pre class="programlisting">
&lt;Name&gt;Calendar&lt;/Name&gt;
            </pre><p>
            </p></div><div class="section" title="Version"><div class="titlepage"><div><div><h5 class="title"><a name="package-version"></a>Version</h5></div></div></div><p>
The package version (required).
            </p><pre class="programlisting">
&lt;Version&gt;1.2.3&lt;/Version&gt;
            </pre><p>
            </p></div><div class="section" title="Framework"><div class="titlepage"><div><div><h5 class="title"><a name="package-framework"></a>Framework</h5></div></div></div><p>
The required framework version (2.4.x means e.g. 2.4.1 or 2.4.9) (required).
            </p><pre class="programlisting">
&lt;Framework&gt;2.4.x&lt;/Framework&gt;
            </pre><p>
            </p><p>
Can also be used several times.
            </p><pre class="programlisting">
&lt;Framework&gt;2.4.x&lt;/Framework&gt;
&lt;Framework&gt;2.3.x&lt;/Framework&gt;
&lt;Framework&gt;2.2.x&lt;/Framework&gt;
            </pre><p>
            </p></div><div class="section" title="Vendor"><div class="titlepage"><div><div><h5 class="title"><a name="package-vendor"></a>Vendor</h5></div></div></div><p>
The package vendor (required).
            </p><pre class="programlisting">
&lt;Vendor&gt;OTRS AG&lt;/Vendor&gt;
            </pre><p>
            </p></div><div class="section" title="URL"><div class="titlepage"><div><div><h5 class="title"><a name="package-url"></a>URL</h5></div></div></div><p>
The vendor URL (required).
            </p><pre class="programlisting">
&lt;URL&gt;http://otrs.org/&lt;/URL&gt;
            </pre><p>
            </p></div><div class="section" title="License"><div class="titlepage"><div><div><h5 class="title"><a name="package-license"></a>License</h5></div></div></div><p>
The license of the package (required).
            </p><pre class="programlisting">
&lt;License&gt;GNU AFFERO GENERAL PUBLIC LICENSE Version 3, November 2007&lt;/License&gt;
            </pre><p>
            </p></div><div class="section" title="ChangeLog"><div class="titlepage"><div><div><h5 class="title"><a name="package-changelog"></a>ChangeLog</h5></div></div></div><p>
The package change log (optional).
            </p><pre class="programlisting">
&lt;ChangeLog Version="1.1.2" Date="2007-02-15 18:45:21"&gt;Added some feature.&lt;/ChangeLog&gt;
&lt;ChangeLog Version="1.1.1" Date="2007-02-15 16:17:51"&gt;New package.&lt;/ChangeLog&gt;
            </pre><p>
            </p></div><div class="section" title="Description"><div class="titlepage"><div><div><h5 class="title"><a name="package-description"></a>Description</h5></div></div></div><p>
The package description in different languages (required).
            </p><pre class="programlisting">
&lt;Description Lang="en"&gt;A web calendar.&lt;/Description&gt;
&lt;Description Lang="de"&gt;Ein Web Kalender.&lt;/Description&gt;
            </pre><p>
            </p></div><div class="section" title="BuildHost"><div class="titlepage"><div><div><h5 class="title"><a name="package-buildhost"></a>BuildHost</h5></div></div></div><p>
This will be filled in automatically by OPM (auto).
            </p><pre class="programlisting">
&lt;BuildHost&gt;?&lt;/BuildHost&gt;
            </pre><p>
            </p></div><div class="section" title="BuildDate"><div class="titlepage"><div><div><h5 class="title"><a name="package-builddate"></a>BuildDate</h5></div></div></div><p>
This will be filled in automatically by OPM (auto).
            </p><pre class="programlisting">
&lt;BuildDate&gt;?&lt;/BuildDate&gt;
            </pre><p>
            </p></div><div class="section" title="PackageRequired"><div class="titlepage"><div><div><h5 class="title"><a name="package-package-required"></a>PackageRequired</h5></div></div></div><p>
Packages that must be installed beforehand (optional).
If PackageRequired is used, a version of the required package must be specified.
            </p><pre class="programlisting">
&lt;PackageRequired Version="1.0.3"&gt;SomeOtherPackage&lt;/PackageRequired&gt;
&lt;PackageRequired Version="5.3.2"&gt;SomeotherPackage2&lt;/PackageRequired&gt;
            </pre><p>
            </p></div><div class="section" title="ModuleRequired"><div class="titlepage"><div><div><h5 class="title"><a name="package-module-required"></a>ModuleRequired</h5></div></div></div><p>
Perl modules that must be installed beforehand (optional).
            </p><pre class="programlisting">
&lt;ModuleRequired Version="1.03"&gt;Encode&lt;/ModuleRequired&gt;
&lt;ModuleRequired Version="5.32"&gt;MIME::Tools&lt;/ModuleRequired&gt;
            </pre><p>
            </p></div><div class="section" title="OS (^M)"><div class="titlepage"><div><div><h5 class="title"><a name="package-os"></a>OS (^M)</h5></div></div></div><p>
Required OS (optional).
            </p><pre class="programlisting">
&lt;OS&gt;linux&lt;/OS&gt;
&lt;OS&gt;darwin&lt;/OS&gt;
&lt;OS&gt;mswin32&lt;/OS&gt;
            </pre><p>
            </p></div><div class="section" title="Filelist"><div class="titlepage"><div><div><h5 class="title"><a name="package-filelist"></a>Filelist</h5></div></div></div><p>
This is a list of files included in the package (optional).
            </p><pre class="programlisting">
&lt;Filelist&gt;
    &lt;File Permission="644" Location="Kernel/Config/Files/Calendar.pm"/&gt;
    &lt;File Permission="644" Location="Kernel/System/CalendarEvent.pm"/&gt;
    &lt;File Permission="644" Location="Kernel/Modules/AgentCalendar.pm"/&gt;
    &lt;File Permission="644" Location="Kernel/Language/de_AgentCalendar.pm"/&gt;
&lt;/Filelist&gt;
            </pre><p>
            </p></div><div class="section" title="DatabaseInstall"><div class="titlepage"><div><div><h5 class="title"><a name="package-database-install"></a>DatabaseInstall</h5></div></div></div><p>
Database entries that have to be created when a package is installed (optional).
            </p><pre class="programlisting">
&lt;DatabaseInstall&gt;
    &lt;TableCreate Name="calendar_event"&gt;
    &lt;Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="BIGINT"/&gt;
    &lt;Column Name="title" Required="true" Size="250" Type="VARCHAR"/&gt;
    &lt;Column Name="content" Required="false" Size="250" Type="VARCHAR"/&gt;
    &lt;Column Name="start_time" Required="true" Type="DATE"/&gt;
    &lt;Column Name="end_time" Required="true" Type="DATE"/&gt;
    &lt;Column Name="owner_id" Required="true" Type="INTEGER"/&gt;
    &lt;Column Name="event_status" Required="true" Size="50" Type="VARCHAR"/&gt;
    &lt;/TableCreate&gt;
&lt;/DatabaseInstall&gt;
            </pre><p>
            </p><p>
You also can choose &lt;DatabaseInstall Type="post"&gt; or &lt;DatabaseInstall Type="pre"&gt; to define the time of execution separately  (post is default).
For more info see chapter "Package Life Cycle".
            </p></div><div class="section" title="DatabaseUpgrade"><div class="titlepage"><div><div><h5 class="title"><a name="package-database-upgrade"></a>DatabaseUpgrade</h5></div></div></div><p>
Information on which actions have to be performed in case of an upgrade (subject to version tag), (optional).
Example (if already installed package version is below 1.3.4 (e. g. 1.2.6), defined action will be performed):
            </p><pre class="programlisting">
&lt;DatabaseUpgrade&gt;
    &lt;TableCreate Name="calendar_event_involved" Version="1.3.4"&gt;
        &lt;Column Name="event_id" Required="true" Type="BIGINT"/&gt;
        &lt;Column Name="user_id" Required="true" Type="INTEGER"/&gt;
    &lt;/TableCreate&gt;
&lt;/DatabaseUpgrade&gt;
            </pre><p>
            </p><p>
You also can choose &lt;DatabaseUpgrade Type="post"&gt; or &lt;DatabaseUpgrade Type="pre"&gt; to define the time of execution separately (post is default).
For more info see chapter "Package Life Cycle".
            </p></div><div class="section" title="DatabaseReinstall"><div class="titlepage"><div><div><h5 class="title"><a name="package-database-reinstall"></a>DatabaseReinstall</h5></div></div></div><p>
Information on what actions have to be performed if  the package is reinstalled, (optional).
            </p><pre class="programlisting">
&lt;DatabaseReinstall&gt;&lt;/DatabaseReinstall&gt;
            </pre><p>
            </p><p>
You also can choose &lt;DatabaseReinstall Type="post"&gt; or &lt;DatabaseReinstall Type="pre"&gt; to define the time of execution separately (post is default).
For more info see chapter "Package Life Cycle".
            </p></div><div class="section" title="DatabaseUninstall"><div class="titlepage"><div><div><h5 class="title"><a name="package-database-uninstall"></a>DatabaseUninstall</h5></div></div></div><p>
Uninstall (if a package gets uninstalled), (optional).
            </p><pre class="programlisting">
&lt;DatabaseUninstall&gt;
    &lt;TableDrop Name="calendar_event" /&gt;
&lt;/DatabaseUninstall&gt;
            </pre><p>
            </p><p>
You also can choose &lt;DatabaseUninstall Type="post"&gt; or &lt;DatabaseUninstall Type="pre"&gt; to define the time of execution separately (post is default).
For more info see chapter "Package Life Cycle".
            </p></div><div class="section" title="IntroInstall"><div class="titlepage"><div><div><h5 class="title"><a name="package-intro-install"></a>IntroInstall</h5></div></div></div><p>
To show a "pre" or "post" install introdution in installation dialog.
            </p><p>
            </p><pre class="programlisting">
&lt;IntroInstall Type="post" Lang="en" Title="Some Title"&gt;
Some Info formated in dtl/html....
&lt;/IntroInstall&gt;
            </pre><p>
            </p><p>
You can also use the "Format" attribute to define if you want to use "html" (which is default) or "plain" to use automatically a "&lt;pre&gt;&lt;/pre&gt;" tag wenn intro is shown (to use the new lines and spaces of the content).
            </p></div><div class="section" title="IntroUninstall"><div class="titlepage"><div><div><h5 class="title"><a name="package-intro-uninstall"></a>IntroUninstall</h5></div></div></div><p>
To show a "pre" or "post" uninstall introdution in uninstallation dialog.
            </p><p>
            </p><pre class="programlisting">
&lt;IntroUninstall Type="post" Lang="en" Title="Some Title"&gt;
Some Info formated in dtl/html....
&lt;/IntroUninstall&gt;
            </pre><p>
            </p><p>
You can also use the "Format" attribute to define if you want to use "html" (which is default) or "plain" to use automatically a "&lt;pre&gt;&lt;/pre&gt;" tag wenn intro is shown (to use the new lines and spaces of the content).
            </p></div><div class="section" title="IntroReinstall"><div class="titlepage"><div><div><h5 class="title"><a name="package-intro-reinstall"></a>IntroReinstall</h5></div></div></div><p>
To show a "pre" or "post" reinstall introdution in reinstallation dialog.
            </p><p>
            </p><pre class="programlisting">
&lt;IntroReinstall Type="post" Lang="en" Title="Some Title"&gt;
Some Info formated in dtl/html....
&lt;/IntroReinstall&gt;
            </pre><p>
            </p><p>
You can also use the "Format" attribute to define if you want to use "html" (which is default) or "plain" to use automatically a "&lt;pre&gt;&lt;/pre&gt;" tag wenn intro is shown (to use the new lines and spaces of the content).
            </p></div><div class="section" title="IntroUpgrade"><div class="titlepage"><div><div><h5 class="title"><a name="package-intro-upgrade"></a>IntroUpgrade</h5></div></div></div><p>
To show a "pre" or "post" upgrade introdution in upgrading dialog.
            </p><p>
            </p><pre class="programlisting">
&lt;IntroUpgrade Type="post" Lang="en" Title="Some Title"&gt;
Some Info formated in dtl/html....
&lt;/IntroUpgrade&gt;
            </pre><p>
            </p><p>
You can also use the "Format" attribute to define if you want to use "html" (which is default) or "plain" to use automatically a "&lt;pre&gt;&lt;/pre&gt;" tag wenn intro is shown (to use the new lines and spaces of the content).
            </p></div><div class="section" title="CodeInstall"><div class="titlepage"><div><div><h5 class="title"><a name="package-code-install"></a>CodeInstall</h5></div></div></div><p>
To execute perl code if the package is installed (optional).
            </p><pre class="programlisting">
&lt;CodeInstall&gt;
    # example
    if (1) {
        print STDERR "Some info to STDERR\n";
    }
    # log example
    $Self-&gt;{LogObject}-&gt;Log(
        Priority =&gt; 'notice',
        Message =&gt; "Some Message!",
    )
    # database example
    $Self-&gt;{DBObject}-&gt;Do(SQL =&gt; "SOME SQL");
&lt;/CodeInstall&gt;
            </pre><p>
            </p><p>
You also can choose &lt;CodeInstall Type="post"&gt; or &lt;CodeInstall Type="pre"&gt; to define the time of execution separately (post is default).
For more info see chapter "Package Life Cycle".
            </p></div><div class="section" title="CodeUninstall"><div class="titlepage"><div><div><h5 class="title"><a name="package-code-uninstall"></a>CodeUninstall</h5></div></div></div><p>
To execute perl code if the package is uninstalled (optional).
On "pre" or "post" time of package uninstallation.
            </p><pre class="programlisting">
&lt;CodeUninstall&gt;
    # example
    if (1) {
        print STDERR "Some info to STDERR\n";
    }
&lt;/CodeUninstall&gt;
            </pre><p>
            </p><p>
You also can choose &lt;CodeUninstall Type="post"&gt; or &lt;CodeUninstall Type="pre"&gt; to define the time of execution separately (post is default).
For more info see chapter "Package Life Cycle".
            </p></div><div class="section" title="CodeReinstall"><div class="titlepage"><div><div><h5 class="title"><a name="package-code-reinstall"></a>CodeReinstall</h5></div></div></div><p>
To execute perl code if the package is reinstalled (optional).
            </p><pre class="programlisting">
&lt;CodeReinstall&gt;
    # example
    if (1) {
        print STDERR "Some info to STDERR\n";
    }
&lt;/CodeReinstall&gt;
            </pre><p>
            </p><p>
You also can choose &lt;CodeReinstall Type="post"&gt; or &lt;CodeReinstall Type="pre"&gt; to define the time of execution separately (post is default).
For more info see chapter "Package Life Cycle".
            </p></div><div class="section" title="CodeUpgrade"><div class="titlepage"><div><div><h5 class="title"><a name="package-code-upgrade"></a>CodeUpgrade</h5></div></div></div><p>
To execute perl code if the package is upgraded (subject to version tag), (optional).
Example (if already installed package version is below 1.3.4 (e. g. 1.2.6), defined action will be performed):
            </p><pre class="programlisting">
&lt;CodeUpgrade Version="1.3.4"&gt;
    # example
    if (1) {
        print STDERR "Some info to STDERR\n";
    }
&lt;/CodeUpgrade&gt;
            </pre><p>
            </p><p>
You also can choose &lt;CodeUpgrade Type="post"&gt; or &lt;CodeUpgrade Type="pre"gt; to define the time of execution separately (post is default).
            </p></div></div><div class="section" title="Example .sopm"><div class="titlepage"><div><div><h4 class="title"><a name="package-example-sopm"></a>Example .sopm</h4></div></div></div><p>
This is a whole example spec file.
        </p><pre class="programlisting">
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;otrs_package version="1.0"&gt;
    &lt;Name&gt;Calendar&lt;/Name&gt;
    &lt;Version&gt;0.0.1&lt;/Version&gt;
    &lt;Framework&gt;2.4.x&lt;/Framework&gt;
    &lt;Vendor&gt;OTRS AG&lt;/Vendor&gt;
    &lt;URL&gt;http://otrs.org/&lt;/URL&gt;
    &lt;License&gt;GNU GENERAL PUBLIC LICENSE Version 2, June 1991&lt;/License&gt;
    &lt;ChangeLog Version="1.1.2" Date="2007-02-15 18:45:21"&gt;Added some feature.&lt;/ChangeLog&gt;
    &lt;ChangeLog Version="1.1.1" Date="2007-02-15 16:17:51"&gt;New package.&lt;/ChangeLog&gt;
    &lt;Description Lang="en"&gt;A web calendar.&lt;/Description&gt;
    &lt;Description Lang="de"&gt;Ein Web Kalender.&lt;/Description&gt;
    &lt;IntroInstall Type="post" Lang="en" Title="Thank you!"&gt;Thank you for choosing the Calendar module.&lt;/IntroInstall&gt;
    &lt;IntroInstall Type="post" Lang="de" Title="Vielen Dank!"&gt;Vielen Dank fuer die Auswahl des Kalender Modules.&lt;/IntroInstall&gt;
    &lt;BuildDate&gt;?&lt;/BuildDate&gt;
    &lt;BuildHost&gt;?&lt;/BuildHost&gt;
    &lt;Filelist&gt;
        &lt;File Permission="644" Location="Kernel/Config/Files/Calendar.pm"&gt;&lt;/File&gt;
        &lt;File Permission="644" Location="Kernel/System/CalendarEvent.pm"&gt;&lt;/File&gt;
        &lt;File Permission="644" Location="Kernel/Modules/AgentCalendar.pm"&gt;&lt;/File&gt;
        &lt;File Permission="644" Location="Kernel/Language/de_AgentCalendar.pm"&gt;&lt;/File&gt;
        &lt;File Permission="644" Location="Kernel/Output/HTML/Standard/AgentCalendar.dtl"&gt;&lt;/File&gt;
        &lt;File Permission="644" Location="Kernel/Output/HTML/NotificationCalendar.pm"&gt;&lt;/File&gt;
        &lt;File Permission="644" Location="var/httpd/htdocs/images/Standard/calendar.png"&gt;&lt;/File&gt;
    &lt;/Filelist&gt;
    &lt;DatabaseInstall&gt;
        &lt;TableCreate Name="calendar_event"&gt;
            &lt;Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="BIGINT"/&gt;
            &lt;Column Name="title" Required="true" Size="250" Type="VARCHAR"/&gt;
            &lt;Column Name="content" Required="false" Size="250" Type="VARCHAR"/&gt;
            &lt;Column Name="start_time" Required="true" Type="DATE"/&gt;
            &lt;Column Name="end_time" Required="true" Type="DATE"/&gt;
            &lt;Column Name="owner_id" Required="true" Type="INTEGER"/&gt;
            &lt;Column Name="event_status" Required="true" Size="50" Type="VARCHAR"/&gt;
        &lt;/TableCreate&gt;
    &lt;/DatabaseInstall&gt;
    &lt;DatabaseUninstall&gt;
        &lt;TableDrop Name="calendar_event"/&gt;
    &lt;/DatabaseUninstall&gt;
&lt;/otrs_package&gt;
        </pre><p>
        </p></div><div class="section" title="Package Build"><div class="titlepage"><div><div><h4 class="title"><a name="package-build"></a>Package Build</h4></div></div></div><p>
To build an .opm package from the spec opm.
        </p><pre class="screen">
shell&gt; bin/otrs.PackageManager.pl -a build -p /path/to/example.sopm
writing /tmp/example-0.0.1.opm
shell&gt;
        </pre><p>
        </p></div><div class="section" title="Package Life Cycle - Install/Upgrade/Uninstall"><div class="titlepage"><div><div><h4 class="title"><a name="package-life-cycle"></a>Package Life Cycle - Install/Upgrade/Uninstall</h4></div></div></div><p>
The following image shows you how the life cycle of a package instalation/upgrade/uninstallation works in the backend step by step.
        </p><div class="screenshot"><div><img src="screenshots/package-life-cycle.png"></div></div><p>
        </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="how-to-extend.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="hacking.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="upgrading-modules.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">How to Extend it </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> How to Upgrade your OTRS Extensions to Newer Versions of OTRS</td></tr></table></div></body></html>
