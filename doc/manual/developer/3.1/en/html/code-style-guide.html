<html><head>
<!-- otrs.github.io -->
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Code Style Guide</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="OTRS 3.1 - Developer Manual"><link rel="up" href="contributing.html" title="Chapter 5. Contributing to OTRS"><link rel="prev" href="translating-docs.html" title="Translating the Documentation"><link rel="next" href="ui-design.html" title="User Interface Design"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Code Style Guide</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="translating-docs.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Contributing to OTRS</th><td width="20%" align="right"> <a accesskey="n" href="ui-design.html">Next</a></td></tr></table><hr></div><div class="section" title="Code Style Guide"><div class="titlepage"><div><div><h2 class="title"><a name="code-style-guide"></a>Code Style Guide</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="code-style-guide.html#code-style-guide-perl">Perl</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#formatting">Formatting</a></span></dt><dt><span class="section"><a href="code-style-guide.html#naming">Naming</a></span></dt><dt><span class="section"><a href="code-style-guide.html#source-code-header">Source Code Header and Charset</a></span></dt><dt><span class="section"><a href="code-style-guide.html#version-comments">Version Comments</a></span></dt><dt><span class="section"><a href="code-style-guide.html#special-comments">Special comments</a></span></dt><dt><span class="section"><a href="code-style-guide.html#function-restrictions">Restrictions for some functions</a></span></dt><dt><span class="section"><a href="code-style-guide.html#perldoc">Perldoc</a></span></dt><dt><span class="section"><a href="code-style-guide.html#line-length">Length of lines</a></span></dt><dt><span class="section"><a href="code-style-guide.html#core-objects">Core-Objects</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#objects-allocation">Objects and their allocation</a></span></dt><dt><span class="section"><a href="code-style-guide.html#mainobject-using">Using of the MainObject</a></span></dt><dt><span class="section"><a href="code-style-guide.html#encodeobject-using">Using of the EncodeObject</a></span></dt></dl></dd><dt><span class="section"><a href="code-style-guide.html#regexes">Regular Expressions</a></span></dt></dl></dd><dt><span class="section"><a href="code-style-guide.html#code-style-guide-javascript">JavaScript</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#idp12723520">Browser Handling</a></span></dt><dt><span class="section"><a href="code-style-guide.html#idp12067536">Directory Structure</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#idp14980672">Thirdparty Code</a></span></dt></dl></dd><dt><span class="section"><a href="code-style-guide.html#idp11625312">Variables</a></span></dt><dt><span class="section"><a href="code-style-guide.html#idp18951056">Functions</a></span></dt><dt><span class="section"><a href="code-style-guide.html#idp15708336">Namespaces</a></span></dt><dt><span class="section"><a href="code-style-guide.html#idp180016">Comments</a></span></dt><dt><span class="section"><a href="code-style-guide.html#idp8937744">Event Handling</a></span></dt></dl></dd><dt><span class="section"><a href="code-style-guide.html#code-style-guide-css">CSS</a></span></dt><dd><dl><dt><span class="section"><a href="code-style-guide.html#idp6803584">Architecture</a></span></dt><dt><span class="section"><a href="code-style-guide.html#idp16345680">Style</a></span></dt></dl></dd></dl></div><p>
        In order to preserve the consistent development of the OTRS project, we have set
        up guidelines regarding style for the different programming languages.
    </p><div class="section" title="Perl"><div class="titlepage"><div><div><h3 class="title"><a name="code-style-guide-perl"></a>Perl</h3></div></div></div><div class="section" title="Formatting"><div class="titlepage"><div><div><h4 class="title"><a name="formatting"></a>Formatting</h4></div></div></div><p>
            TAB: We use 4 spaces. Examples for braces:
        </p><p>
        </p><pre class="programlisting">
if ($Condition) {
    Foo();
}
else {
    Bar();
}

while ($Condition == 1) {
    Foo();
}
        </pre><p>
        </p></div><div class="section" title="Naming"><div class="titlepage"><div><div><h4 class="title"><a name="naming"></a>Naming</h4></div></div></div><p>
            Names and comments are written in English. Variables, Objects and Methods
            must be descriptive nouns or noun phrases with the first letter set upper case.
        </p><p>
        </p><pre class="programlisting">
e. g. @TicktIDs or $Output or BuildQueueView()
        </pre><p>
        </p></div><div class="section" title="Source Code Header and Charset"><div class="titlepage"><div><div><h4 class="title"><a name="source-code-header"></a>Source Code Header and Charset</h4></div></div></div><p>
            Attach the following header to every source file.
            Source files are saved in UTF-8 charset.
        </p><p>
        </p><pre class="programlisting">
# --
# (file name) - a short description what it does
# Copyright (C) 2001-2013 OTRS AG, http://otrs.com/
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --
        </pre><p>
        </p><p>
            Executable files (*.pl) have a special header.
        </p><p>
        </p><pre class="programlisting">
#!/usr/bin/perl
# --
# (file name) - a short description what it does
# Copyright (C) 2001-2013 OTRS AG, http://otrs.com/
# --
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU AFFERO General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
# or see http://www.gnu.org/licenses/agpl.txt.
# --
        </pre><p>
        </p></div><div class="section" title="Version Comments"><div class="titlepage"><div><div><h4 class="title"><a name="version-comments"></a>Version Comments</h4></div></div></div><p>
            Some functions may not be available in the current framework version. Thus, sometimes
            settings have to be changed when a new module and framework version will be released.
            If you use version comments, you can search for information (e.g. using grep) on what must be changed when
            a new version is published. The keyword for version comments is 'FRAMEWORK'
            For perl use '#' and for xml use the xml comments.
        </p><p>
        </p><pre class="programlisting">
e.g. for perl-code
# FRAMEWORK-2.1: the function ID2UserName is first available in OTRS 2.1
        </pre><p>
        </p></div><div class="section" title="Special comments"><div class="titlepage"><div><div><h4 class="title"><a name="special-comments"></a>Special comments</h4></div></div></div><p>
    The only ways to create special comments are the following ways.

    Example 1 - especially for subactions of frontend modules

        </p><p>
            </p><pre class="programlisting">
    # -----------------------------------#
    # here is the start of a special area
    # -----------------------------------#
            </pre><p>
        </p><p>
    Example 2 - especially for customizing standard OTRS files
        </p><p>
            </p><pre class="programlisting">
    # --- customizing for some project
            </pre><p>
        </p></div><div class="section" title="Restrictions for some functions"><div class="titlepage"><div><div><h4 class="title"><a name="function-restrictions"></a>Restrictions for some functions</h4></div></div></div><p>
    Some functions are not useful in every script. Please pay attention
    to the following restrictions.
        </p><p>
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>don't use "die" and "exit" in .pm-files</p></li><li class="listitem"><p>don't use the "Dumper" function in released files</p></li><li class="listitem"><p>don't use "print" in .pm files</p></li><li class="listitem"><p>use OTRS specific function "SystemTime2Date" instead of "localtime"</p></li></ul></div><p>
        </p></div><div class="section" title="Perldoc"><div class="titlepage"><div><div><h4 class="title"><a name="perldoc"></a>Perldoc</h4></div></div></div><p>
    Every function which could be used outside of its package must have a
    perldoc. It should look like the following example.
        </p><p>
            </p><pre class="programlisting">
=item SystemTime2TimeStamp()

returns a time stamp in "yyyy-mm-dd 23:59:59" format.

    my $TimeStamp = $TimeObject-&gt;SystemTime2TimeStamp(
        SystemTime =&gt; $SystemTime,
    );

If you need the short format "23:59:59" for dates that are "today",
pass the Type parameter like this:

    my $TimeStamp = $TimeObject-&gt;SystemTime2TimeStamp(
        SystemTime =&gt; $SystemTime,
        Type       =&gt; 'Short',
    );

=cut
            </pre><p>
        </p></div><div class="section" title="Length of lines"><div class="titlepage"><div><div><h4 class="title"><a name="line-length"></a>Length of lines</h4></div></div></div><p>
    Make sure that a line of code is not longer than 100 charactars.
        </p></div><div class="section" title="Core-Objects"><div class="titlepage"><div><div><h4 class="title"><a name="core-objects"></a>Core-Objects</h4></div></div></div><div class="section" title="Objects and their allocation"><div class="titlepage"><div><div><h5 class="title"><a name="objects-allocation"></a>Objects and their allocation</h5></div></div></div><p>
        In OTRS many objects are available. But you should not use every object in every file.
        This is also because of the split between frontend and backend code.
            </p><p>
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>don't use the LayoutObject in core modules</p></li><li class="listitem"><p>don't use the ParamObject in core modules</p></li><li class="listitem"><p>don't use the DBObject in frontend modules</p></li></ul></div><p>
            </p></div><div class="section" title="Using of the MainObject"><div class="titlepage"><div><div><h5 class="title"><a name="mainobject-using"></a>Using of the MainObject</h5></div></div></div><p>
        Information about the MainObject
            </p><p>
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>initialize the MainObject in the basic .pl-file</p></li><li class="listitem"><p>in .pm files only pass it to the next Object you initialize</p></li><li class="listitem"><p>don't use the Perl "require" function, use the MainObject</p></li></ul></div><p>
            </p></div><div class="section" title="Using of the EncodeObject"><div class="titlepage"><div><div><h5 class="title"><a name="encodeobject-using"></a>Using of the EncodeObject</h5></div></div></div><p>
        Information about the EncodeObject
            </p><p>
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>initialize the EncodeObject in the basic .pl-file</p></li><li class="listitem"><p>in .pm files only pass it to the next Object you initialize</p></li></ul></div><p>
            </p></div></div><div class="section" title="Regular Expressions"><div class="titlepage"><div><div><h4 class="title"><a name="regexes"></a>Regular Expressions</h4></div></div></div><p>
            For regular expressions we always use the m// operator with curly braces as delimiters. We also use the modifiers x, m and s.
            The x modifiers allows you to comment your regex and use spaces to "group" logical groups.
        </p><p>
        </p><pre class="programlisting">
    $Date =~ m{ \A \d{4} - \d{2} - \d{2} \z }xms
    $Date =~ m{
        \A    # beginning of the string
        \d{4} - # year
        \d{2} - # month
        [^\n]   # everything but newline
        #..
    }xms;
</pre><p>
        </p><p>
            As the space no longer has a special meaning, you have to use a single character class to match a single space ( [ ]). If you want to match any whitespace you can use \s.

In the regex, the dot ('.') includes the newline (whereas in regex without s modifier the dot means 'everything but newline'). If you want to match anything but newline, you have to use the negated single character class ([^\n]).
        </p><p>
        </p><pre class="programlisting">
    $Text =~ m{
        Test
        [ ]    # there must be a space between 'Test' and 'Regex'
        Regex
    }xms;
</pre><p>
        </p></div></div><div class="section" title="JavaScript"><div class="titlepage"><div><div><h3 class="title"><a name="code-style-guide-javascript"></a>JavaScript</h3></div></div></div><div class="section" title="Browser Handling"><div class="titlepage"><div><div><h4 class="title"><a name="idp12723520"></a>Browser Handling</h4></div></div></div><p>
            All JavaScript is loaded in all browsers (no browser hacks in the .dtl files).
            The code is responsible to decide if it has to skip or execute certain parts of itself only in certain browsers.
        </p></div><div class="section" title="Directory Structure"><div class="titlepage"><div><div><h4 class="title"><a name="idp12067536"></a>Directory Structure</h4></div></div></div><p>
            Directory structure inside the <code class="literal">js/</code> folder:

            </p><pre class="programlisting">
* js
    * thirdparty              # thirdparty libs always have the version number inside the directory
        * ckeditor-3.0.1
        * jquery-1.3.2
    * Core.Agent.*            # stuff specific to the agent interface
    * Core.Customer.*         # customer interface
    * Core.*                  # common API
            </pre><p>
        </p><div class="section" title="Thirdparty Code"><div class="titlepage"><div><div><h5 class="title"><a name="idp14980672"></a>Thirdparty Code</h5></div></div></div><p>
                Every thirdparty module gets its own subdirectory: "module name"-"version number" (e.g. ckeditor-3.0.1, jquery-1.3.2).
                Inside of that, file names should not have a version number or postfix included (wrong: <code class="literal">jquery/jquery-1.4.3.min.js</code>,
                right: <code class="literal">jquery-1.4.3/jquery.js</code>).
            </p></div></div><div class="section" title="Variables"><div class="titlepage"><div><div><h4 class="title"><a name="idp11625312"></a>Variables</h4></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Variable names should be CamelCase, just like in Perl.</p></li><li class="listitem"><p>Variables that hold a jQuery object should start with <code class="literal">$</code>, for example: <code class="literal">$Tooltip</code>.</p></li></ul></div><p>
        </p></div><div class="section" title="Functions"><div class="titlepage"><div><div><h4 class="title"><a name="idp18951056"></a>Functions</h4></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Function names should be CamelCase, just like in Perl.</p></li></ul></div><p>
        </p></div><div class="section" title="Namespaces"><div class="titlepage"><div><div><h4 class="title"><a name="idp15708336"></a>Namespaces</h4></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>TODO...</p></li></ul></div><p>
        </p></div><div class="section" title="Comments"><div class="titlepage"><div><div><h4 class="title"><a name="idp180016"></a>Comments</h4></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Single line comments are done with <code class="literal">//</code>.</p></li><li class="listitem"><p>Longer comments are done with <code class="literal">/* ... */</code></p></li><li class="listitem"><p>
                    If you comment out parts of your JavaScript code, only use <code class="literal">//</code>
                    because <code class="literal">/* .. */</code> can cause problems with Regular Expressions in the code.
                </p></li></ul></div><p>
        </p></div><div class="section" title="Event Handling"><div class="titlepage"><div><div><h4 class="title"><a name="idp8937744"></a>Event Handling</h4></div></div></div><p>
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                    Always use <code class="literal">$.bind()</code> instead of the event-shorthand methods of jQuery for better
                    readability (wrong: <code class="literal">$SomeObject.click(...)</code>, right: <code class="literal">$SomeObject.bind('click', ...</code>).
                </p></li><li class="listitem"><p>
                    Do not use <code class="literal">$.live()</code>!
                    We had severe performance issues with <code class="literal">$.live()</code> in correlation with mouse events.
                    Until it can be verified that <code class="literal">$.live()</code> works with other event types without problems.
                </p></li><li class="listitem"><p>
                    If you <code class="literal">$.bind()</code> events, make sure to <code class="literal">$.unbind()</code> them beforehand,
                    to make sure that events will not be bound twice, should the code be executed another time.
                </p></li></ul></div><p>
        </p></div></div><div class="section" title="CSS"><div class="titlepage"><div><div><h3 class="title"><a name="code-style-guide-css"></a>CSS</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                Minimum resolution is 1024x768px.
            </p></li><li class="listitem"><p>
                The layout is liquid, which means that if the screen is wider, the space will be used.
            </p></li><li class="listitem"><p>
                Absolute size measurements should be specified in px to have a consistent look on many platforms and browsers.
            </p></li><li class="listitem"><p>
                Documentation is made with CSSDOC (see CSS files for examples). All logical blocks should have a CSSDOC comment.
            </p></li></ul></div><div class="section" title="Architecture"><div class="titlepage"><div><div><h4 class="title"><a name="idp6803584"></a>Architecture</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                    We follow the <a class="ulink" href="http://wiki.github.com/stubbornella/oocss/" target="_top">Object Oriented CSS</a> approach.
                    In essence, this means that the layout is achieved by combining different generic building blocks to realize a particular design.
                </p></li><li class="listitem"><p>
                    Wherever possible, module specific design should not be used.
                    Therefore we also do not work with IDs on the body element, for example, if it can be avoided.
                </p></li></ul></div></div><div class="section" title="Style"><div class="titlepage"><div><div><h4 class="title"><a name="idp16345680"></a>Style</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                    All definitions have a <code class="literal">{</code> in the same line as the selector, all rules are defined in one row per rule,
                    the definition ends with a row with a single <code class="literal">}</code> in it. See the following example:

                    </p><pre class="programlisting">
#Selector {
    width: 10px;
    height: 20px;
    padding: 4px;
}
                    </pre><p>
                </p></li><li class="listitem"><p>
                    Between <code class="literal">:</code> and the rule value, there is a space
                </p></li><li class="listitem"><p>
                    Every rule has an indent of 4 spaces.
                </p></li><li class="listitem"><p>
                    If multiple selectors are specified, separate them with comma and put each one on an own line:

                    </p><pre class="programlisting">
#Selector1,
#Selector2,
#Selector3 {
    width: 10px;
}
                    </pre><p>
                </p></li><li class="listitem"><p>
                    If rules are combinable, combine them (e.g. combine <code class="literal">background-position</code>, <code class="literal">background-image</code>, ... into <code class="literal">background</code>).
                </p></li><li class="listitem"><p>
                    Rules should be in a logical order within a definition (all color specific rule together, all positioning rules together, ...).
                </p></li><li class="listitem"><p>
                    All IDs and Names are written in CamelCase notation:

                    </p><pre class="programlisting">
&lt;div class="NavigationBar" id="AdminMenu"&gt;&lt;/div&gt;
                    </pre><p>
                </p></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="translating-docs.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="contributing.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ui-design.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Translating the Documentation </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> User Interface Design</td></tr></table></div></body></html>
