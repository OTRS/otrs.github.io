<html><head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
$(document).ready(function() {

    // Hint languages to prevent false matches (php for example).
    hljs.configure({
        languages: ['perl', 'javascript', 'xml', 'html', 'css', 'json', 'yaml', 'bash']
    });

    // programlistings in manuals
    $('pre.programlisting').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    // code snippets in Perl API docs
    $('.pod pre').addClass('perl').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});</script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Stats-модуль</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OTRS 3.3 - Руководство Администратора"><link rel="up" href="administration.html" title="Глава 4. Администрирование"><link rel="prev" href="pdf-output.html" title="Настройка вывода в формате PDF"><link rel="next" href="dynamicfields.html" title="Динамические Поля"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Stats-модуль</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pdf-output.html">Пред.</a> </td><th width="60%" align="center">Глава 4. Администрирование</th><td width="20%" align="right"> <a accesskey="n" href="dynamicfields.html">След.</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="statistic-module"></a>Stats-модуль</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="statistic-module.html#stats-usage">Обработка модуля агентом</a></span></dt><dd><dl><dt><span class="section"><a href="statistic-module.html#stats-overview">Обзор</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-viewing-generating">Создание и просмотр отчетов</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-modify-new">Редактировать / Создать новый</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-import">Импорт</a></span></dt></dl></dd><dt><span class="section"><a href="statistic-module.html#stats-managing-the-module">Администрирование модуля статистики OTRS администратором.</a></span></dt><dd><dl><dt><span class="section"><a href="statistic-module.html#stats-permissions">Настройки полномочий, Групп и Ролей</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-sysconfig">SysConfig</a></span></dt></dl></dd><dt><span class="section"><a href="statistic-module.html#stats-managing-the-stats-module-by-the-sysadmin">Администрирование модуля статистики системным администратором</a></span></dt><dd><dl><dt><span class="section"><a href="statistic-module.html#stats-db-table">Таблица базы данных</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-filelist">Список файлов</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-caching">Кэширование</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-mkstats">otrs.GenerateStats.pl</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-cron">Автоматическое создание статистики с помощью планировщика заданий - Cronjob</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-static">Статические отчеты</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-using-old-stats">Использование устаревших данных статической статистики</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-default-stats">Статистика по умолчанию</a></span></dt></dl></dd></dl></div><p>
Модуль отчетов OTRS дает возможность оперативно отслеживать статистику и
создавать пользовательские отчеты, связанные с использованием OTRS. OTRS
использует общеупотребляемый термин "stat" для обозначения отчетов с
различными показателями.
</p><p>
Правильная настройка модуля статистики OTRS связана с множеством различных
условий. К ним относятся различные модули системы OTRS, подлежащие оценке,
настройки прав доступа пользователей, признаки, которые должны быть
рассчитаны и уровень их сложности, легкость настройки модуля статистики,
скорость и эффективность вычислений, поддержка множества вариантов вывода
информации.
</p><p>
Статистические элементы, такие как например файлы, которые дополняют
функциональные возможности модуля статистики для конкретых требований, могут
быть интегрированы для подсчета сложной статистики.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="stats-usage"></a>Обработка модуля агентом</h3></div></div></div><p>
Когда вы вошли в систему как агент, в меню интерфейса будет отображатся
пункт "Отчеты". Этот раздел имеет множество различных подменю, как это
показано на Рисунке.
</p><p>
</p><div class="screenshot"><div><img src="screenshots/stats-menu.png"></div></div><p>
</p><p>
<span class="emphasis"><em>Рисунок: Опции меню Статистика.</em></span>
</p><p>
Различные варианты представленные в меню статистики:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="emphasis"><em>Overview</em></span>. Предоставляет список различных предварительно
сконфигурированных отчетов.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Новая</em></span>. Требуются права rw.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Импорт</em></span>. Требуются rw-права.
        </p></li></ul></div><p>
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-overview"></a>Обзор</h4></div></div></div><p>
Выберите ссылку "Отчеты" в меню, а затем подменю "Обзор". На открывшейся
странице будет представлен список всех предварительно настроеных отчетов,
которые агент уже может использовать (см. Рисунок ниже).

</p><p>
</p><div class="screenshot"><div><img src="screenshots/stats-overview.png"></div></div><p>
</p><p>
<span class="emphasis"><em>Рисунок: Просмотр стандартных запросов.</em></span>
</p><p>
Для каждого из отчетов, перечисленных в Обзоре предоставлена следующая
информация:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="emphasis"><em>Stat#</em></span>. Уникальный номер отчета.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Заголовок</em></span>. Заголовок отчета.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Объект</em></span>. Объект, который используется для генерации
статистики. В случае статической статистики не отображается ни один объект,
поскольку в ее генерации динамические объекты не участвуют.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Описание</em></span>. Краткое описание отчета.
        </p></li></ul></div><p>
</p><p>
Когда модуль статистики установлен, он поставлятся с несколькими
предустановленными отчетами, выборочно встроенными в систему. Они приведены
в виде списка на странице "Обзор". Если список слишком большой и не
помещается на одну страницу, у агента есть возможность просматривать другие
страницы. Список отчетов может быть отсортирован по своему вкусу, путем
нажатия на желаемый заголовок столбца в списке. Чтобы создать конкретный
отчет, нажмите на соответствующие stat-номер, связанный с отчетом. В
результате откроется интерфейс просмотра отчета.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-viewing-generating"></a>Создание и просмотр отчетов</h4></div></div></div><p>
Пользовательский интерфейс предоставляет параметры настройки отчетов
(см. Рисунок ниже).
</p><p>
</p><div class="screenshot"><a name="stats-view-screenshot"></a><div><img src="screenshots/stats-view.png"></div></div><p>
</p><p>
<span class="emphasis"><em>Рисунок: Просмотр определенного отчета.</em></span>
</p><p>
Параметры конфигурации для конкретного отчета могут быть установлены путем
выбора ряда возможных опций. Как автор отчета так и другие пользователи с
соответсвтующими правами доступа могут создавать настройки.
</p><p>
На странице отображается следующее:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        Возможные действия:
        </p><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                    <span class="emphasis"><em>Перейти к обзору</em></span>. Ссылка, ведущая обратно к Просмотру
списка отчетов.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Редактировать</em></span>. Редактировать имеющуюся структуру отчета
(требуются права для чтения и записи, rw).
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Удалить</em></span>. Удалить текущий отчет (требуются права для
чтения и записи, rw).
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Экспортировать настройки</em></span>. Экспортировать настройки
отчета с помощью загрузки файла (требуются права для чтения и записи, rw).
                </p><p>
                    Традиционно: функции Экспорт и Импорт позволяют создавать и тестировать
отчеты та тестовых системах с их легкой дальнейшей интеграцией в
производственную систему.
                </p></li></ul></div><p>
        </p></li><li class="listitem"><p>
        Подробности отчета:
        </p><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                    <span class="emphasis"><em>Отчет#</em></span>. Номер отчета.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Заголовок</em></span>. Заголовок отчета.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Объект</em></span>. Объект, который используется для создания
отчета.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Описание</em></span>. Описание цели отчета.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Формат</em></span>. Выходной формат отчета. В зависимости от
конфигурации, можно  выбрать один из следующих форматов вывода:
                </p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                        CSV.
                        </p></li><li class="listitem"><p>
                        Печать.
                        </p></li><li class="listitem"><p>
                        Графические линии.
                        </p></li><li class="listitem"><p>
                        Столбцовая диаграмма.
                        </p></li><li class="listitem"><p>
                        Диаграмма.
                        </p></li><li class="listitem"><p>
                        Точечная диаграмма.
                        </p></li><li class="listitem"><p>
                        Точечно-линейная диаграмма.
                        </p></li><li class="listitem"><p>
                        Диаграмма
                        </p></li><li class="listitem"><p>
                        Круговая "пирожок"-диаграмма.
                        </p></li></ul></div><p>
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Размер в пикселях</em></span>. Размер графиков/диаграмм в
пикселях. Эта опция доступна только в том случае, если в настройках отчета
разрешены графики. Все часто используемые графические размеры настраиваются
OTRS-администратором в SysConfig. Затем, во время настройки отчета, агент
может выбрать необходимый формат из всех доступных.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Количество строк</em></span>. Указывает когда отчет заменяется
колонкой, чьи ячейки содержат сумму соответствующих строк.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Количество колонок</em></span>. Указывает когда отчет заменяется
строкой, чьи ячейки содержат сумму соответствующих колонок.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Кэш</em></span>. Указывает когда сгенерированный отчет кэшируется в
файловой системе.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Действительный</em></span>. Может быть установлен в значение
"недействительный"  если по какой то причине отчет временно не должен
запускаться. Кнопка "Старт" в нижней части правой панели больше не
отображается. Таким образом отчет не может быть создан.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Создан</em></span>.  Время создания отчета.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Создан (кем)</em></span>. Имя агента, который создал отчет.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Изменен</em></span>. Время последней модификации отчета.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Изменен кем</em></span>. Имя агента, который последним внес
изменения в отчет.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>X-axis</em></span>. Используя эту функцию, агент может переключать
x и y axes (только в том случае, если эта опция активирована
OTRS-администратором).
                </p></li><li class="listitem"><p>
                Общая информация сопровождается информацией о самом отчете. Есть два
различных шаблона просмотра отчета (или статистики):
                </p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                            <span class="emphasis"><em>Static stat view</em></span>. Static report generators can be
integrated into the stats module (see Figure below).
                        </p><p>
                        </p><div class="screenshot"><div><img src="screenshots/stats-view-static.png"></div></div><p>
                        </p><p>
                            <span class="emphasis"><em>Figure: Viewing a static report.</em></span>
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Dynamic stat view</em></span> (see Figure above). They can be
displayed in two different ways:
                        </p><p>
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    <span class="emphasis"><em>Неизменяемые настройки</em></span>. Создатель отчета не имеет прав
для изменения этих полей.
                                </p></li><li class="listitem"><p>
                                    <span class="emphasis"><em>Изменяемые настройки</em></span>. Параметры конфигурации таких
отчетов могут быть изменены агентом.
                                </p></li></ul></div><p>
                        </p></li></ul></div><p>
                </p></li></ul></div><p>
        </p></li></ul></div><p>
</p><p>
Нажатие кнопки "Пуск" (в нижней части экрана) является последним шагом при
создании отчета. Есть две возможные причины, когда эта кнопка не будет
отображаться:
</p><p>
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
        Отчет был установлен недействительным и, таким образом отключен.
        </p></li><li class="listitem"><p>
        Отчет был настроен не аккуратно и, следовательно, не может выполнятся. В
этом случае необходимую информацию можно найти в разделе уведомлений OTRS
(внизу, под навигационной панелью).
        </p></li></ol></div><p>
</p><p>
Если настройки на странице Просмотр неверны, эта страница отображается
опять, после нажатия кнопки "Пуск" и информация о введеных неверных данных
будет выведена в разделе уведомлений.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-modify-new"></a>Редактировать / Создать новый</h4></div></div></div><p>
Агенты, которые имеют права на запись, могут редактировать настройки
существующего отчета, запустив пользовательский веб-интерфейс модуля
статистики. В качестве альтернативы они могут создать новый
отчет. Соответствующие страницы могут быть запущены следующим образом:
</p><p>
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
    Редактировать: Используя кнопку "Редактировать" в шаблоне просмотра
статистики.
    </p></li><li class="listitem"><p>
    Новый: Используя ссылку "Новый" в меню Статистика навигационной панели, или
кнопку "Добавить" на странице Просмотр.
    </p></li></ol></div><p>
</p><p>
Статистика редактируется с помощью мастера в четыре этапа:
</p><p>
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
    Общие технические условия.
    </p></li><li class="listitem"><p>
    Определение элементов для X-axis.
    </p></li><li class="listitem"><p>
    Спецификация значений ряда.
    </p></li><li class="listitem"><p>
    Выбор ограничений для отчета.
    </p></li></ol></div><p>
</p><p>
Шаги с 2-4 необходимы только для создания отчетов с динамической
статистикой. Для статической статистики требуется  только общая информация
(пункт 1).
</p><p>
Информация о том, как обрабатывать страницу приводится на каждом из этих
экранов, ниже панели "Действия" панели Подсказок.
</p><p>
Если введены неправильные данные, предыдущий пользовательский интерфейс
отображатеся заново, на этот раз уже с информацией о неправильных входных
данных. Эта информация отображается в  OTRS в разделе уведомлений. Следующий
пользовательский веб-интерфейс для ввода отображатеся только в том случае,
если все поля формы заполнены правильно.
</p><p>
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
        <span class="emphasis"><em>Общие спецификации</em></span>. Это первая страница мастера
Редактирования (см. Рисунок ниже).
    </p><p>
    </p><div class="screenshot"><div><img src="screenshots/stats-edit-general.png"></div></div><p>
    </p><p>
        <span class="emphasis"><em>Рисунок: Редактирование общих спецификаций отчета.</em></span>
    </p><p>
        На странице приведенной на Рисунке доступно большое количество общих
спецификаций и настроек, которые можно редактировать:
    </p><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="emphasis"><em>Заголовок</em></span>. Должны в сжатой форме отражать назначение
(цель).
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Описание</em></span>. Более подробная информация об отчете, типах
конфигурационных параметров и т.д.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Динамический объект</em></span>.  Если установленная система OTRS
предоставляет различные динамические объекты, один из них может быть
выбран. Объекты отвечают требованиям отдельных модулей.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Static file</em></span>. Обычно эта возможность не отображается до
тех пор, пока отображаются статические файлы, назначеные отчету. Если
"Статический файл" отображается, позже, очень важно поставить галочку в поле
и выбрать режим генерации (динамический с динамический объектом или
статический с файлом). Если выбран статический файл, пользовательский
веб-интерфейс 2-4 не отображается как статический файл содержащий все
необходимые настройки.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Настройки прав доступа</em></span>. Содействие ограничению групп
(и, следовательно, агентов), которые позже могут просматривать и
генерировать предварительные отчеты. Таким образом, различные отчеты могут
быть выделена для различных отделов и рабочих групп, которые в них
нуждаются. Можно выделить одину статистику для различных групп.
            </p><p>
                Пример 1: Выбрана "stats" группа. Отчет доступен для просмотра для всех
пользователей имеющих по крайней мере права на группу "stats . Этот доступ
доступен по умолчанию.
            </p><p>
                Пример 2: Была выбрана группа под названием "продажи". Все пользователи,
имеющие права ro (read only) к этой группе могут выдеть статистику в режиме
просмотра э генерировать ее. Однако отчет не будет доступен для просмотра
другим пользователям.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Формат</em></span>. Формат отображения статистики. В зависимости от
конфигурации, могут быть выбраны следующие один или несколько форматов:
            </p><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                        CSV.
                    </p></li><li class="listitem"><p>
                        Печать.
                    </p></li><li class="listitem"><p>
                        graph-lines.
                    </p></li><li class="listitem"><p>
                        graph-bars.
                    </p></li><li class="listitem"><p>
                        graph-hbars.
                    </p></li><li class="listitem"><p>
                        graph-points.
                    </p></li><li class="listitem"><p>
                        graph-lines-points.
                    </p></li><li class="listitem"><p>
                        graph-area.
                    </p></li><li class="listitem"><p>
                        graph-pie.
                    </p></li></ul></div><p>
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Размер графика</em></span>. Выберите размер диаграммы в
пикселях. Этот выбор необходим только в том случае, если графический формат
вывода был выбран в "Формат". Все графические размеры, которые можно
использовать определяются в OTRS в SysConfig. При настройке отчета, агент
может предварительно выбрать все соответствующие форматы.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Количество строк</em></span>. Указывает когда отчет заменяется
колонкой, чьи ячейки содержат сумму соответствующих строк.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Сумма столбцов</em></span>.  Указывает когда отчет заменяется
строкой, чье ячейки содержат сумму соответствующих строк.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Кэш</em></span>. Указывает на то, что созданный отчет должен
кэшироваться в файловой системе. Это позволяет существенно экономить
вычислительные мощности и время, но должно использоваться только в том
случае если содержание отчета больше не будет изменятся.
            </p><p>
                Кэширование автоматически прекращается, если отчет не содержит временных
обозначений, или когда временные обозначения указывают на будущее.
            </p><p>
                В случае редактирования закэшированного отчета удаляются все закэшированные
данные.
            </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Действительный</em></span>. Устанавливается в значение
"недействительный" если ранее сконфигурированный отчет по какой то причине
не должен выполнятся. Кнопка "Статистика" также не отображатеся  в правом
нижнем углу блока. Отчет больше не генерируется.
            </p></li></ul></div><p>
    </p></li><li class="listitem"><p>
        <span class="emphasis"><em>Определение элементов для X-axis</em></span>. Это конфигурация для
элементов, которые используются для описания X-axis или, если используются
таблицы, имя столбца применяется для X-axis (см. Рисунок ниже).
    </p><p>
    </p><div class="screenshot"><div><img src="screenshots/stats-edit-xaxis.png"></div></div><p>
    </p><p>
        <span class="emphasis"><em>Рисунок: Определение элементов для X-axis.</em></span>
    </p><p>
    Во-первых, элемент выбирается с помощью опционального поля. Потом нужно
выбрать два или более атрибутов элемента. Если выбраных атрибутов нету,
используются все атрибуты, в том числе и те, которые были добавлены после
конфигурации отчета.
    </p><p>
    Если  отключена настройка "Фиксированный", агент, генерирующий отчет, может
изменить атрибуты соответствующего элемента в меню "Вид" пользовательского
веб-интерфейса.
    </p><p>
    Элементы времени отличаются от периодов времени. Тип и число элементов
зависит от использующихся динамических обьектов и сильно зависит от этого.
    </p><p>
    Если все входные данные введены правильно, нажатие кнопки "Следующий шаг"
открывает форму "Серия значений". Кроме этого, есть возможность заново
вернуться к редактированию предыдуших разделов.
    </p></li><li class="listitem"><p>
        <span class="emphasis"><em>Спецификация серии значений</em></span>.
    </p><p>
    На третьем шаге настройки отчета нужно определить серию значений
(см. Рисунок ниже). Позже они будут использованы для формирования графиков
или различных серий в табличном виде.
    </p><p>
    </p><div class="screenshot"><div><img src="screenshots/stats-edit-valueseries.png"></div></div><p>
    </p><p>
        <span class="emphasis"><em>Рисунок: Определение значений серии.</em></span>
    </p><p>
    Если выбран определенный элемент, каждый выбранный атрибут будет
соответствовать значеню серии (см. ниже Пример 19-1).
    </p><p>
    </p><div class="example"><a name="stats-value-series-1"></a><p class="title"><b>Пример 4.19. Определение значения серии - один из элементов</b></p><div class="example-contents"><p>
    Элемент Очередь:
    </p><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Серия значений 1 = Raw
            </p></li><li class="listitem"><p>
            Значение серии 2 = Junk
            </p></li><li class="listitem"><p>
            ....
            </p></li></ul></div><p>
    </p></div></div><p><br class="example-break">
    </p><p>
    Если для формирования значения ряда, выбрано два элемента, каждый выбраный
атрибут первого элемента комбинируется с атрибутом второго элемента
(см. ниже Рисунок 19-2).
    </p><p>
    </p><div class="example"><a name="stats-value-series-2"></a><p class="title"><b>Пример 4.20. Определение значения серии - один из элементов </b></p><div class="example-contents"><p>
    Элемент 1 очередь, Элемент 2 статус:
    </p><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Значение создания 1 = Raw - открыть
            </p></li><li class="listitem"><p>
            Серия значений 2 = Raw - успешно закрыта
            </p></li><li class="listitem"><p>
            Серия значений 3 = Junk - открыто
            </p></li><li class="listitem"><p>
            Серия значений 4 = Junk - успешно закрыто
            </p></li></ul></div><p>
    </p></div></div><p><br class="example-break">
    </p><p>
    Выбор из трех или более элементов не допускается.
    </p><p>
    Кроме этого эти условия распостраняются и на выбор атрибутов и флажок
"Основные" как для "X-axis":
    </p><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Если для элемента не выбрано никаких атрибутов, то используются все
атрибуты, включая и те, которые были добавлены после настройки отчета.
            </p></li><li class="listitem"><p>
            Если параметр "Фиксированный" отключен, агент, который создает отчет может
изменять атрибуты соответствующих элементов.
            </p></li></ul></div><p>
    </p></li><li class="listitem"><p>
        <span class="emphasis"><em>Установка ограничений отчета</em></span>. Это четвертый и последний
этап конфигурации (см. Рисунок ниже). Ограничения служат для ограничения
результатов выбранных критериев. В ряде случаев не должно быть никаких
ограничений.
    </p><p>
    </p><div class="screenshot"><div><img src="screenshots/stats-edit-restrictions.png"></div></div><p>
    </p><p>
        <span class="emphasis"><em>Рисунок: Определение ограничений.</em></span>
    </p><p>
    После установки всех ограничей, конфигурация отчета завершается нажатием
кнопки "Готово".
    </p></li></ol></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-import"></a>Импорт</h4></div></div></div><p>
Для доступа к пользовательскому интерфейсу Импорта (см. Рисунок ниже)
перейдите по ссылке "Статистика", а затем выберите "Импорт". Альтернативный
способ - на странице "Обзор" нажать кнопку Импорт, это приведет к тому же
результату, но для этого действия требуются права для чтения и записи "RW".
</p><p>
</p><div class="screenshot"><div><img src="screenshots/stats-import.png"></div></div><p>
</p><p>
    <span class="emphasis"><em>Рисунок: Пользовательский веб-интерфейс для Импорта.</em></span>
</p><p>
Очень удобная функция, значительно облегчает импорт статистики, особенно в
сочетании с возможностями модуля экспорта. Статистику можно создать и
протестировать на тестовых системах, а затем импортировать в реальную
систему.
</p><p>
Импорт осуществляется путем простой загрузки файла. После этого, для импорта
статистики, автоматически открывается пользовательский интерфейс "Вид".
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="stats-managing-the-module"></a>Администрирование модуля статистики OTRS администратором.</h3></div></div></div><p>
Этот раздел предоставляет информацию о задачах и функциях администратора
OTRS, который работает с модулем статистики.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-permissions"></a>Настройки полномочий, Групп и Ролей</h4></div></div></div><p>
Нет новых очередей и/или групп, созданых при установке модуля статистики.
</p><p>
В конфигурации по умолчанию модуль регистрации дает всем агентам группы
"статистика" права доступа к модулю статистики.
</p><p>
Доступ в соответствии с разрешенными настройками:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="emphasis"><em>rw</em></span>. Разрешает настройку статистики и отчетов.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>ro</em></span>. Разрешает генерацию предварительно
сконфигурированной статистики и отчетов.
        </p></li></ul></div><p>
</p><p>
OTRS-администратор самостоятельно определяет когда агенты с правами для
генерации предварительно настроенных отчетов выделяются в ro-права для
группы "статистика", или если их соответствующие группы добавляются в модуль
регистрации в SysConfig.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-sysconfig"></a>SysConfig</h4></div></div></div><p>
Группы SysConfig <a class="link" href="ConfigReference_Framework.html#ConfigReference_Framework:Core::Stats" title="Core::Stats">Framework:Core::Stats</a>,
<a class="link" href="ConfigReference_Framework.html#ConfigReference_Framework:Core::Stats::Graph" title="Core::Stats::Graph">Framework:Core::Stats::Graph</a>
and <a class="link" href="ConfigReference_Framework.html#ConfigReference_Framework:Frontend::Agent::Stats" title="Frontend::Agent::Stats">Framework:Frontend::Agent::Stats</a>
содержат все параметры конфигурации базового набора из модуля
статистики. Больше того, конфигурационный параметр <a class="link" href="ConfigReference_Framework.html#ConfigReference_Framework:Frontend::Agent::ModuleRegistration:Frontend::Module_AgentStats" title="Frontend::Module###AgentStats">$Self-&gt;{'Frontend::Module'}-&gt;{'AgentStats'}</a>
управляет организацией и регистрацией модулей и иконками в модуле
статистики.
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="stats-managing-the-stats-module-by-the-sysadmin"></a>Администрирование модуля статистики системным администратором</h3></div></div></div><p>
Как правило, системного администратора не требуется для эксплуатации,
настройки и обслуживания модуля статистики. Однако, немного справочной
информации дано для системного администартора в этой точке.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Примечание</h3><p>
Пути к файлам см. в подкаталогах домашнего каталога OTRS (в большинстве
случаев <code class="filename">/opt/otrs</code>).
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-db-table"></a>Таблица базы данных</h4></div></div></div><p>
Включены все конфигурационные параметры отчета и управляются в XML и,
следовательно, хранятся в таблице базы данных "xml_storage". Другие модули,
конкент которых хранится в xml-формате также используют эту таблицу.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-filelist"></a>Список файлов</h4></div></div></div><p>
Следующие файлы необходимы для коректной работы модуля статистики:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        <code class="filename">Kernel/System/Stats.pm</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Modules/AgentStats.pm</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/System/CSV.pm</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsOverview.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsDelete.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsEditSpecification.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsEditRestrictions.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsEditXaxis.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsEditValueSeries.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsImport.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsPrint.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsView.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/System/Stats/Dynamic/Ticket.pm</code>
        </p></li><li class="listitem"><p>
        <code class="filename">bin/otrs.GenerateStats.pl</code>
        </p></li></ul></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-caching"></a>Кэширование</h4></div></div></div><p>
Результаты статистики должны быть сохранены в кэше или не могут быть
установлены в конфигурации. Кэшированые результаты отчетов хранятся в файлах
в каталоге <code class="filename">var/tmp</code> установленной системы OTRS (в
большинстве случаев <code class="filename">/opt/otrs/var/tmp</code>).
</p><p>
Кэшированная статистика может быть распознана с помощью префикса "Stats".
</p><p>
В случае потери данных системе не будет принесено серьезного ущерба. При
вызове модуля статистики в следующий раз, в случае если он не обнаружит
файл, отчет сгенерируется заново. Конечно, это может занять немного больше
времени.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-mkstats"></a>otrs.GenerateStats.pl</h4></div></div></div><p>
Этот файл хранится в директории <code class="filename">bin</code>.  Он позволяет
генерировать статистику прямо из командрной строки.
</p><p>
В качестве примера смотрите вызов Сценария из командной сторки, который
приведен ниже.
</p><p>
</p><pre class="programlisting">
bin&gt; perl otrs.GenerateStats.pl -n 10004 -o /output/dir
</pre><p>
</p><p>
    <span class="emphasis"><em>Сценарий: Создание отчета из командной строки.</em></span>
</p><p>
Отчет из конфигурации статистики "Stat# 10004" генерируется и хранится в
csv-формате в директории <code class="filename">/output/dir</code>.
</p><p>
Сгенерированный отчет также быть отправлен по электронной почте. Более
подробную информацию можно получить выполнив команду из Сценария приведенног
ниже.
</p><p>
</p><pre class="programlisting">
bin&gt; perl otrs.GenerateStats.pl --help
</pre><p>
</p><p>
    <span class="emphasis"><em>Сценарий: Получение информации о файле
otrs.GenerateStats.pl.</em></span>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-cron"></a>Автоматическое создание статистики с помощью планировщика заданий - Cronjob</h4></div></div></div><p>
Очевидным является тот факт, что в действительности, нету необходимости
генерировать отчеты вручную, из командной строки, так как модудь статистики
имеет удобный графический веб-интерфейс пользователя. Однако, создание
отчетов вручную имеет смысл в сочетании с Cronjob.
</p><p>
Представьте себе следующую ситуацию: Каждый первый день месяца, руководители
отделов хотят получать отчет за последний месяц. Объединив cronjob с
командой запуска сценария в командной строке, статистика может отправляться
им по электронной почте автоматически.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-static"></a>Статические отчеты</h4></div></div></div><p>
Модуль статистики облегчает генерацию статической статистики. Для каждой
статической статистики создается отдельный файл, в котором точто определено
его содержание.
</p><p>
Таким образом может быть сгенерирована очень сложная статистика. Главным
недостатком является то, что этот способ есть не очень гибким.
</p><p>
Файлы хранятся в директории
<code class="filename">Kernel/System/Stats/Static/</code>.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-using-old-stats"></a>Использование устаревших данных статической статистики</h4></div></div></div><p>
Прежние версии OTRS 1.3 и 2.0 уже позволяли генерировать отчеты. Различные
отчеты для OTRS версии 1.3 и 2.0 которые были специально разработаны для
удовлетворения потребностей клиентов могут быть использованы в более позних
версиях OTRS.
</p><p>Файлы должны быть просто перемещены из
<code class="filename">Kernel/System/Stats/</code> в
<code class="filename">Kernel/System/Stats/Static/</code>. Кроме этого имя пакета
соответствующего сценария должен быть заменен на "::Static".
</p><p>
В следующем примере показано как изменяется первый путь.
</p><p>
</p><pre class="programlisting">
    package Kernel::System::Stats::AccountedTime;
</pre><p>
</p><p>
</p><pre class="programlisting">
    package Kernel::System::Stats::Static::AccountedTime;
</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-default-stats"></a>Статистика по умолчанию</h4></div></div></div><p>"Не всегда нужно изобретать велосипед..."
</p><p>
Модуль статистики предоставляет различные предустановленные
отчеты. Предустановленные отчеты, которые могут заинтересовать всех OTRS
пользователей можно в будущем добавить в модуль
статистики. Предустановленные отчеты хранится в модуле статистики в
xml-формате в директории <code class="filename">scripts/test/sample/</code>.
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pdf-output.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="administration.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="dynamicfields.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Настройка вывода в формате PDF </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Динамические Поля</td></tr></table></div></body></html>
