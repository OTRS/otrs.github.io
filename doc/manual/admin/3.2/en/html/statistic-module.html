<html><head>
<!-- otrs.github.io -->
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href='//fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Stats module</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="OTRS 3.2 - Admin Manual"><link rel="up" href="administration.html" title="Chapter 4. Administration"><link rel="prev" href="pdf-output.html" title="Customizing the PDF output"><link rel="next" href="dynamicfields.html" title="Dynamic Fields"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Stats module</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pdf-output.html">Prev</a> </td><th width="60%" align="center">Chapter 4. Administration</th><td width="20%" align="right"> <a accesskey="n" href="dynamicfields.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="statistic-module"></a>Stats module</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="statistic-module.html#stats-usage">Handling of the module by the agent</a></span></dt><dd><dl><dt><span class="section"><a href="statistic-module.html#stats-overview">Overview</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-viewing-generating">Generate and view reports</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-modify-new">Edit / New</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-import">Import</a></span></dt></dl></dd><dt><span class="section"><a href="statistic-module.html#stats-managing-the-module">Administration of the stats module by the OTRS administrator</a></span></dt><dd><dl><dt><span class="section"><a href="statistic-module.html#stats-permissions">Permission settings, Groups and Queues</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-sysconfig">SysConfig</a></span></dt></dl></dd><dt><span class="section"><a href="statistic-module.html#stats-managing-the-stats-module-by-the-sysadmin">Administration of the stats module by the system administrator</a></span></dt><dd><dl><dt><span class="section"><a href="statistic-module.html#stats-db-table">Data base table</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-filelist">List of all files</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-caching">Caching</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-mkstats">otrs.GenerateStats.pl</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-cron">Automated stat generation - Cronjob</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-static">Static stats</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-using-old-stats">Using old static stats</a></span></dt><dt><span class="section"><a href="statistic-module.html#stats-default-stats">Default stats</a></span></dt></dl></dd></dl></div><p>
The OTRS stats module holds features to track operational statistics and generates custom reports associated with OTRS usage. The OTRS system uses the term "stat" generically to refer to a report presenting various indicators.
</p><p>
Proper configuration of the OTRS stats module is associated with a multitude of requirements and considerations. These include the various OTRS modules to be evaluated, user permission settings, indicators to be calculated and their complexity levels, ease of configuration of the stats module, speed and efficiency of calculations, and support of a rich set of output variants.
</p><p>
Statistical elements, i.e. files which supplement the functionality of the stats module for specific requirements, can be integrated for calculating complex statistics.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="stats-usage"></a>Handling of the module by the agent</h3></div></div></div><p>
When signed on as an agent, the navigation bar displays the link "Statistics", with various submenu options, as shown in Figure.
</p><p>
</p><div class="screenshot"><div><img src="screenshots/stats-menu.png"></div></div><p>
</p><p>
<span class="emphasis"><em>Figure: Statistics menu options.</em></span>
</p><p>
The different options provided in the statistics menu are:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="emphasis"><em>Overview</em></span>. Presents a list of different pre-configured reports.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>New</em></span>. Requires rw rights.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Import</em></span>. Requires rw rights.
        </p></li></ul></div><p>
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-overview"></a>Overview</h4></div></div></div><p>
Selecting the "Statistics" link in the navigation bar, and then the submenu link "Overview", calls up the Overview screen. The Overview screen presents a list of all pre-configured reports the agent can use (see Figure below).

</p><p>
</p><div class="screenshot"><div><img src="screenshots/stats-overview.png"></div></div><p>
</p><p>
<span class="emphasis"><em>Figure: Overview of the standard reports.</em></span>
</p><p>
The following information is provided for each of the standard reports listed in the Overview:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="emphasis"><em>Stat#</em></span>. Unique report number.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Title</em></span>. Title of the report.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Object</em></span>. Object used for generating the statistic. In the case of a static statistic, no object is displayed as no dynamic object is used for its generation.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Description</em></span>. A brief description of the report.
        </p></li></ul></div><p>
</p><p>
When the stats module is installed, it comes preloaded with a few sample reports imported into the system. These are shown as a list on the Overview page. If the Overview list extends to more than a single page, the agent can browse through the different pages. The list of reports can be sorted as desired, by clicking the desired column header in the list. To generate a particular report, click on the stat number associated with the report in the Overiew list. This brings up the "View" interface for the report.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-viewing-generating"></a>Generate and view reports</h4></div></div></div><p>
The view user interface provides the stat's configuration settings (see Figure below).
</p><p>
</p><div class="screenshot"><a name="stats-view-screenshot"></a><div><img src="screenshots/stats-view.png"></div></div><p>
</p><p>
<span class="emphasis"><em>Figure: Viewing a specific report.</em></span>
</p><p>
Configuration settings for a particular report can be set within the range of options in the View screen. Either the report creator or any others with the appropriate permissions can make the settings.
</p><p>
The page shows the following:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        Possible actions:
        </p><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                    <span class="emphasis"><em>Go to overview</em></span>. Link back to the Overview list of reports.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Edit</em></span>. Edit the current report structure (rw rights required).
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Delete</em></span>. Delete the current report (rw rights required).
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Export config</em></span>. Export a report configuration, via file download (rw rights required).
                </p><p>
                    Usage: Export and Import functions allow for the convenient creation and testing of reports on test systems and subsequent easy integration into the production system.
                </p></li></ul></div><p>
        </p></li><li class="listitem"><p>
        Report details:
        </p><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                    <span class="emphasis"><em>Stat#</em></span>. Number of the report.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Title</em></span>. Title of the report.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Object</em></span>. Object used for generating the report.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Description</em></span>. Description on the report's purpose.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Format</em></span>. Report output format which, depending on the configuration, can be any of the following output formats:
                </p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                        CSV.
                        </p></li><li class="listitem"><p>
                        Print.
                        </p></li><li class="listitem"><p>
                        Graph-lines.
                        </p></li><li class="listitem"><p>
                        Graph-bars.
                        </p></li><li class="listitem"><p>
                        Graph-hbars.
                        </p></li><li class="listitem"><p>
                        Graph-points.
                        </p></li><li class="listitem"><p>
                        Graph-lines-points.
                        </p></li><li class="listitem"><p>
                        Graph-area.
                        </p></li><li class="listitem"><p>
                        Graph-pie.
                        </p></li></ul></div><p>
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Graphsize</em></span>. Size in pixels for the graphic / chart. This option is only given when the report configuration allows a chart. All generally usable graphic sizes are configured by the OTRS administrator in SysConfig. The agent can then pre-select all relevant formats, while configuring the report.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Sum rows</em></span>. Indicates whether the report is amended by a column, whose cells state the sums of the respective rows.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Sum columns</em></span>. Indicates whether the report is amended by a row, whose cells state the sum of the respective columns.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Cache</em></span>. Indicates whether the generated report is cached in the filesystem.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Valid</em></span>. This can be set to "invalid" if a report must not be run temporarily for any reason. The "Start" button in the bottom of the right panel is then no longer displayed. The report can no longer be generated.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Created</em></span>. Creation time of the report.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Created by</em></span>. Name of the agent who created the report.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Changed</em></span>. Time when the report was last modified.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>Changed by</em></span>. Name of the agent who altered the report last.
                </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>X-axis</em></span>. Using this function, the agent can switch the x and y axes (only when activated by the OTRS administrator).
                </p></li><li class="listitem"><p>
                The general information is followed by information about the report itself. There are two different report (or stat) views:
                </p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>
                            <span class="emphasis"><em>Static stat view</em></span>. Static report generators can be integrated into the stats module (see Figure below).
                        </p><p>
                        </p><div class="screenshot"><div><img src="screenshots/stats-view-static.png"></div></div><p>
                        </p><p>
                            <span class="emphasis"><em>Figure: Viewing a static report.</em></span>
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Dynamic stat view</em></span> (see Figure above). They can be displayed in two different ways:
                        </p><p>
                        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                                    <span class="emphasis"><em>Unchangeable settings</em></span>. The originator of the report has no permission for modifying this fields.
                                </p></li><li class="listitem"><p>
                                    <span class="emphasis"><em>Changeable settings</em></span>. The configuration settings of such reports can be changed by the agent.
                                </p></li></ul></div><p>
                        </p></li></ul></div><p>
                </p></li></ul></div><p>
        </p></li></ul></div><p>
</p><p>
Pressing the "Start" button (at the bottom of the screen) is the last step to generate the report. There are two possible reasons for this button to not be displayed:
</p><p>
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
        The report was set to invalid and thus, deactivated.
        </p></li><li class="listitem"><p>
        The report was not configured cleanly and is, therefore, not yet executable. In this case, the necessary information can be found in the OTRS notification section (below the navigation bar).
        </p></li></ol></div><p>
</p><p>
If the settings on the View page are incorrect, this page is shown again after the "Start" button was pushed, and information about which input was incorrect is provided in the notification section.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-modify-new"></a>Edit / New</h4></div></div></div><p>
Agents with write rights can edit an existing report configuration by calling up the edit user interface of the stats module. Alternately, they may create a new report. The associated screens can be reached in the following manner:
</p><p>
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
    Edit: Via the "Edit" button in the stat view.
    </p></li><li class="listitem"><p>
    New: Via the "New" link in the Statistics menu from the navigation bar, or the "Add" button from the Overview page.
    </p></li></ol></div><p>
</p><p>
The stats are edited with a wizard in four steps:
</p><p>
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
    General specifications.
    </p></li><li class="listitem"><p>
    Definition of the element for the X-axis.
    </p></li><li class="listitem"><p>
    Specification of the value series.
    </p></li><li class="listitem"><p>
    Selecting the restrictions to limit the report.
    </p></li></ol></div><p>
</p><p>
Steps 2 through 4 are only needed for the generation of reports with dynamic stats. For a static stat, only the general information (point 1) is required.
</p><p>
Information about how to handle the page is provided on each of these screens, below the Actions panel in a Hints panel.
</p><p>
If incorrect inputs are entered, the previously processed user interface is displayed again and with information about the incorrect input. This information can be found in the OTRS notification section. The next input user interface is only displayed after the current form has been filled out correctly.
</p><p>
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
        <span class="emphasis"><em>General specifications</em></span>. It is the first page of the Edit wizard (see Figure below).
    </p><p>
    </p><div class="screenshot"><div><img src="screenshots/stats-edit-general.png"></div></div><p>
    </p><p>
        <span class="emphasis"><em>Figure: Editing the general specifications of a report.</em></span>
    </p><p>
        In the screen showed in Figure, there are a great number of common specifications and settings that can be edited:
    </p><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                <span class="emphasis"><em>Title</em></span>. Should reflect the stat's purpose in a concise manner.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Description</em></span>. More descriptive information about the report definition, type of configuration parameters, etc.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Dynamic object</em></span>. If the OTRS installation provides various dynamic objects, one of them can be chosen. The objects meet the requirements of the particular modules.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Static file</em></span>. Usually this selection is not shown, as only static files which are not yet assigned to any reports are displayed. If "Static file" is displayed, however, it is important to tick the option field and select a generation mode (dynamic with a dynamic object or static with a file). If a static file is selected, the input user interfaces 2 through 4 are not shown as the static file contains all required configuration settings.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Permission settings</em></span>. Facilitate a restriction of the groups (and therefore, agents) who can later view and generate the preconfigured reports. Thus the various reports can be allocated to the different departments and work groups who need them. It is possible to allocate one report to various groups.
            </p><p>
                Example 1: The "stats" group was selected. The report is viewable for all users having at least ro rights for the "stats" group. This access is available by default.
            </p><p>
                Example 2: A group named "sales" was selected. All users with ro rights for the "sales" group can see the stat in the view mode and generate it. However, the report will not be available for viewing by other users.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Format</em></span>. Output format of the stat: Depending on the configuration, one or more of the following formats can be chosen:
            </p><p>
            </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                        CSV.
                    </p></li><li class="listitem"><p>
                        Print.
                    </p></li><li class="listitem"><p>
                        graph-lines.
                    </p></li><li class="listitem"><p>
                        graph-bars.
                    </p></li><li class="listitem"><p>
                        graph-hbars.
                    </p></li><li class="listitem"><p>
                        graph-points.
                    </p></li><li class="listitem"><p>
                        graph-lines-points.
                    </p></li><li class="listitem"><p>
                        graph-area.
                    </p></li><li class="listitem"><p>
                        graph-pie.
                    </p></li></ul></div><p>
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Graphsize</em></span>. Select the chart size in pixels. This selection is only necessary if a graphical output format has been chosen under "Format". All graphic sizes that can generally be used are defined by the OTRS administrator in SysConfig. When configuring the report, the agent can pre-select all relevant formats.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Sum rows</em></span>. Indicates whether the report is amended by a column, whose cells contain the sum of the respective row.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Sum columns</em></span>. Indicates whether the report is amended by a row, whose cells contain the sum of the respective column.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Cache</em></span>. Specifies if the generated report should be cached in the filesystem. This saves computing power and time if the report is called up again, but it should only be used if the report's content is no longer changing.
            </p><p>
                Caching is automatically prevented if the report contains no time designation values, or if a time designation value points to the future.
            </p><p>
                If a cached report is edited, all cached data is deleted.
            </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Valid</em></span>. This can be set to "invalid" if a pre-configured report must not be run temporarily for any reason. The "Start" button in the bottom of the right panel is then no longer displayed. The report can no longer be generated.
            </p></li></ul></div><p>
    </p></li><li class="listitem"><p>
        <span class="emphasis"><em>Definition of the element for the X-axis</em></span>. It is the configuration of the element used for the depiction of the X-axis or, if tables are used, of the column name applied to the X-axis (see Figure).
    </p><p>
    </p><div class="screenshot"><div><img src="screenshots/stats-edit-xaxis.png"></div></div><p>
    </p><p>
        <span class="emphasis"><em>Figure: Definition of the element for the X-axis.</em></span>
    </p><p>
    First of all, an element is selected using the option field. Then two or more attributes of the element must be selected. If no attributes are selected, all attributes are used including those added after the configuration of the report.
    </p><p>
    If the "Fixed" setting is disabled, the agent generating the report can change the attributes of the respective element in the "View" user interface.
    </p><p>
    Time elements are different as time period and scale have to be stated. Type and number of elements result from the used dynamic object and vary depending on it.
    </p><p>
    If all input is correct, the "Next" button leads to the "Value series" form. It is also possible to go back to editing earlier sections.
    </p></li><li class="listitem"><p>
        <span class="emphasis"><em>Specification of the value series</em></span>.
    </p><p>
    In the third step of the report configuration, the value series are defined (see Figure below). They will later form the individual graphs or the various series within a tabular view.
    </p><p>
    </p><div class="screenshot"><div><img src="screenshots/stats-edit-valueseries.png"></div></div><p>
    </p><p>
        <span class="emphasis"><em>Figure: Definition of the value series.</em></span>
    </p><p>
    If an element is selected, each chosen attribute will correspond to a value series (see the Example 19-1 below).
    </p><p>
    </p><div class="example"><a name="stats-value-series-1"></a><p class="title"><b>Example 4.18. Definition of a value series - one element</b></p><div class="example-contents"><p>
    Element Queue:
    </p><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Value series 1 = Raw
            </p></li><li class="listitem"><p>
            Value series 2 = Junk
            </p></li><li class="listitem"><p>
            ....
            </p></li></ul></div><p>
    </p></div></div><p><br class="example-break">
    </p><p>
    If two elements are selected, each selected attribute of the first element is combined with an attribute of the second element to form a value series (see Example 19-2 below).
    </p><p>
    </p><div class="example"><a name="stats-value-series-2"></a><p class="title"><b>Example 4.19. Definition of a value series - two elements </b></p><div class="example-contents"><p>
    Element 1 queue, Element 2 status:
    </p><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Value chain 1 = Raw - open
            </p></li><li class="listitem"><p>
            Value series 2 = Raw - successfully closed
            </p></li><li class="listitem"><p>
            Value series 3 = Junk - open
            </p></li><li class="listitem"><p>
            Value series 4 = Junk - successfully closed
            </p></li></ul></div><p>
    </p></div></div><p><br class="example-break">
    </p><p>
    Selection of three or more elements is not allowed.
    </p><p>
    Additionally the same conditions apply to the selection of the attributes and the "Fixed" checkbox as to the "X-axis" selection:
    </p><p>
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            If no attributes of the element are selected, all attributes are used, including those added after the configuration of the report.
            </p></li><li class="listitem"><p>
            If the "Fixed" setting is disabled, the agent generating the report can change the attributes of the respective element.
            </p></li></ul></div><p>
    </p></li><li class="listitem"><p>
        <span class="emphasis"><em>Setting restrictions to the report</em></span>. This is the fourth and final step of the configuration (see Figure below). The restrictions serve to limit the results to the selected criteria. In many cases, no restrictions at all may be set up.
    </p><p>
    </p><div class="screenshot"><div><img src="screenshots/stats-edit-restrictions.png"></div></div><p>
    </p><p>
        <span class="emphasis"><em>Figure: Definition of restrictions.</em></span>
    </p><p>
    After all the restrictions are set up, the configuration of the report is completed by pressing the "Finish" button.
    </p></li></ol></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-import"></a>Import</h4></div></div></div><p>
The Import user interface (see Figure below) can be accessed by choosing from the navigation bar, the link "Statistics", then "Import". Alternately, pressing the Import button on the Overview screen achieves the same result. "rw" rights to the report are required.
</p><p>
</p><div class="screenshot"><div><img src="screenshots/stats-import.png"></div></div><p>
</p><p>
    <span class="emphasis"><em>Figure: The Import user interface.</em></span>
</p><p>
Facilitates the import of reports and is, when combined with the export function of the module, a very handy functionality. Stats can be created and tested conveniently on test systems, then imported into the production system.
</p><p>
The import is effected by an easy file upload. The "View" user interface of the imported report is opened automatically afterwards.
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="stats-managing-the-module"></a>Administration of the stats module by the OTRS administrator</h3></div></div></div><p>
This section provides information about the tasks and responsibilities of the OTRS administrator dealing with the statistics module.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-permissions"></a>Permission settings, Groups and Queues</h4></div></div></div><p>
No new queues and/or groups are created when the stats module is installed.
</p><p>
The default configuration of the module registration gives all agents with "stats" group permissions access to the stats module.
</p><p>
Access according to permission settings:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="emphasis"><em>rw</em></span>. Allows configuring statistics and reports.
        </p></li><li class="listitem"><p>
            <span class="emphasis"><em>ro</em></span>. Permits generating pre-configured statistics and reports.
        </p></li></ul></div><p>
</p><p>
The OTRS administrator decides whether agents with the permission to generate pre-configured reports are allocated ro rights in the "stats" group, or if their respective groups are added in the module registration in SysConfig.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-sysconfig"></a>SysConfig</h4></div></div></div><p>
The SysConfig groups <a class="link" href="">Framework:Core::Stats</a>, <a class="link" href="">Framework:Core::Stats::Graph</a> and <a class="link" href="">Framework:Frontend::Agent::Stats</a> contain all configuration parameters for the basic set-up of the statistics module. Moreover, the configuration parameter <a class="link" href="ConfigReference_Framework.html#Framework:Frontend::Agent::ModuleRegistration:Frontend::Module_AgentStats" title="Frontend::Module###AgentStats">$Self-&gt;{'Frontend::Module'}-&gt;{'AgentStats'}</a> controls the arrangement and registration of the modules and icons within the statistics module.
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="stats-managing-the-stats-module-by-the-sysadmin"></a>Administration of the stats module by the system administrator</h3></div></div></div><p>
Generally, no system administrator is needed for the operation, configuration and maintenance of the statistics module. However, a little background information for the system administrator is given at this point.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
File paths refer to subdirectories of the OTRS home directory (in most cases<code class="filename">/opt/otrs</code>).
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-db-table"></a>Data base table</h4></div></div></div><p>
All report configurations are implemented and administrated in XML, and therefore stored in the database table
"xml_storage". Other modules whose content is presented in xml format use this table as well.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-filelist"></a>List of all files</h4></div></div></div><p>
The following files are necessary for the stats module to work accurately:
</p><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        <code class="filename">Kernel/System/Stats.pm</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Modules/AgentStats.pm</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/System/CSV.pm</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsOverview.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsDelete.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsEditSpecification.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsEditRestrictions.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsEditXaxis.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsEditValueSeries.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsImport.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsPrint.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/Output/HTML/Standard/AgentStatsView.dtl</code>
        </p></li><li class="listitem"><p>
        <code class="filename">Kernel/System/Stats/Dynamic/Ticket.pm</code>
        </p></li><li class="listitem"><p>
        <code class="filename">bin/otrs.GenerateStats.pl</code>
        </p></li></ul></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-caching"></a>Caching</h4></div></div></div><p>
Whether the results of a statistic are to be cached or not can be setup in the configuration. Cached report results are stored as files in the <code class="filename">var/tmp</code>directory of the OTRS installation (in most cases <code class="filename">/opt/otrs/var/tmp</code>).
</p><p>
Cached stats can be recognized by the "Stats" prefix.
</p><p>
If the data is lost, no major damage is caused. The next time the report is called up, the stats module will not find the file any more and so will generate a new report. Of course this will probably take a little longer to run.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-mkstats"></a>otrs.GenerateStats.pl</h4></div></div></div><p>
This file is saved in the <code class="filename">bin</code>directory. It facilitates the generation of report in the command line.
</p><p>
As an example, see the command line call in the following script.
</p><p>
</p><pre class="programlisting">
bin&gt; perl otrs.GenerateStats.pl -n 10004 -o /output/dir
</pre><p>
</p><p>
    <span class="emphasis"><em>Script: Generating a report from the command line.</em></span>
</p><p>
A report from the stat configuration "Stat# 10004" is generated and saved as csv in the <code class="filename">/output/dir</code> directory.
</p><p>
The generated report can also be sent as an e-mail. More information can be called up with the command in the script below.
</p><p>
</p><pre class="programlisting">
bin&gt; perl otrs.GenerateStats.pl --help
</pre><p>
</p><p>
    <span class="emphasis"><em>Script: Getting information about the otrs.GenerateStats.pl file.</em></span>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-cron"></a>Automated stat generation - Cronjob</h4></div></div></div><p>
It usually does not make sense to generate reports manually via the command line, as the stats module has a convenient graphical user interface. However, generating reports manually does make sense when combined with a Cronjob.
</p><p>
Imagine the following scenario: On the first day of every month, the heads of department want to receive a report for the past month. By combining a cronjob and command line call the reports can be sent to them automatically by e-mail.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-static"></a>Static stats</h4></div></div></div><p>
The stats module facilitates the generation of static statistics. For every static stat a file exists in which its content is precisely defined.
</p><p>
This way, very complex stats can be generated. The disadvantage is that they are not particularly flexible.
</p><p>
The files are saved in the directory <code class="filename">Kernel/System/Stats/Static/</code>.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-using-old-stats"></a>Using old static stats</h4></div></div></div><p>
Prior OTRS versions 1.3 and 2.0 already facilitated the generation of stats / reports. Various reports for OTRS versions 1.3 and 2.0 which have been specially developed to meet customers' requirements can be used in recent OTRS versions too.
</p><p>The files must merely be moved from the <code class="filename">Kernel/System/Stats/</code> path to <code class="filename">Kernel/System/Stats/Static/</code>. Additionally the package name of the respective script must be amended by "::Static".
</p><p>
The following example shows how the first path is amended.
</p><p>
</p><pre class="programlisting">
    package Kernel::System::Stats::AccountedTime;
</pre><p>
</p><p>
</p><pre class="programlisting">
    package Kernel::System::Stats::Static::AccountedTime;
</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="stats-default-stats"></a>Default stats</h4></div></div></div><p>"It is not always necessary to reinvent the wheel..."
</p><p>
The stats module provides various default reports. Reports which are of interest for all OTRS users will in future be added to the default reports set of the stats module package. Default reports are saved in the stats module xml format in the<code class="filename">scripts/test/sample/</code> directory.
</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pdf-output.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="administration.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="dynamicfields.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Customizing the PDF output </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Dynamic Fields</td></tr></table></div></body></html>
