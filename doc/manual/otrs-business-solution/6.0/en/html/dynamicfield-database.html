<html><head>
<!-- otrs.github.io -->
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../../../../documentation.css">
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../../../../../documentation.js"></script>
<link rel="icon" type="image/png" sizes="32x32" href="../../../../../../images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../../../images/favicon-16x16.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
$(document).ready(function() {

    // Hint languages to prevent false matches (php for example).
    hljs.configure({
        languages: ['perl', 'javascript', 'xml', 'html', 'css', 'json', 'yaml']
    });

    // programlistings in manuals
    $('pre.programlisting').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    // code snippets in Perl API docs
    $('.pod pre').addClass('perl').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});</script>
<!-- otrs.github.io -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>The Dynamic Field Database</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="OTRS Business Solution™ 6 Manual"><link rel="up" href="otrs-business-solution-features.html" title="Chapter 3. Features of OTRS Business Solution™"><link rel="prev" href="dynamicfield-contact-with-data.html" title="The Dynamic Field Contact with Data"><link rel="next" href="dynamicfield-webservice.html" title="The Dynamic Field Web Service"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">The Dynamic Field <span class="emphasis"><em>Database</em></span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dynamicfield-contact-with-data.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Features of <span class="bold"><strong>OTRS Business Solution</strong></span>™</th><td width="20%" align="right"> <a accesskey="n" href="dynamicfield-webservice.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="dynamicfield-database"></a>The Dynamic Field <span class="emphasis"><em>Database</em></span></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.3">Description</a></span></dt><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.4">Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.4.3">Adding a <span class="emphasis"><em>Database</em></span> Dynamic Field</a></span></dt><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.4.4">Configuration of the External Data Source</a></span></dt><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.4.5">Screen Configuration</a></span></dt><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.4.6">Storage of Historical Data</a></span></dt><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.4.7">Sysconfig Settings</a></span></dt></dl></dd><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.5">Usage</a></span></dt><dd><dl><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.5.3">Searching and Saving Datasets - Autocompletion</a></span></dt><dt><span class="section"><a href="dynamicfield-database.html#id-1.4.4.5.4">Searching and Saving Datasets - Detailed Search</a></span></dt></dl></dd></dl></div><p>
        This feature implements a dynamic field of the type <span class="emphasis"><em>Database</em></span>.
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.4.4.3"></a>Description</h3></div></div></div><p>
            This feature implements a generic dynamic field type, which offers the possibility to gather data from external databases.
            Such connected datasets can be searched and filtered using additional masks.
        </p><p>
            Related found and marked datasets can be saved to the particular tickets through the dynamic field.
        </p><p>
            <span class="emphasis"><em>Database</em></span> dynamic fields can be created the same way, as the default dynamic fields are created.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.4.4.4"></a>Configuration</h3></div></div></div><p>
            The following list of configuration options can be used for this feature.
        </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.4.4.3"></a>Adding a <span class="emphasis"><em>Database</em></span> Dynamic Field</h4></div></div></div><p>
                This feature implements a configuration interface to create dynamic fields of the type <span class="emphasis"><em>Database</em></span>.
            </p><p>
                <span class="emphasis"><em>Database</em></span> dynamic fields can be created the same way, as the default dynamic fields are created. For this switch to the
                <span class="emphasis"><em>Admin → Ticket Settings → Dynamic Fields</em></span> view. In this mask you can select the <span class="emphasis"><em>Database</em></span> field from the ticket drop down box on the left side. Currently it's not possible to use the <span class="emphasis"><em>Database</em></span> dynamic field in the article context.
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        Configuration <span class="emphasis"><em>General - Name</em></span>:
                    </p><p>
                        Dynamic fields of the type <span class="emphasis"><em>Database</em></span> need a unique name just like other dynamic fields, too. This name has to contain only alphanumeric values. This name will be used for internal handling of the field but will not be displayed.
                    </p></li><li class="listitem"><p>
                        Configuration <span class="emphasis"><em>General - Label</em></span>:
                    </p><p>
                        The label can be individually set and can contain white spaces etc. It will be used as the field label in the different views.
                    </p></li><li class="listitem"><p>
                        Configuration <span class="emphasis"><em>General - Field order</em></span>:
                    </p><p>
                        The field order allows a administrator to change the order of created dynamic fields. If this configuration get changed the general field order will be adjusted and other dynamic fields will be moved one position back.
                    </p></li><li class="listitem"><p>
                        Configuration <span class="emphasis"><em>General - Valid</em></span>:
                    </p><p>
                        To use the dynamic field in the configured OTRS views it has to be set as valid. If the field is set to <span class="emphasis"><em>invalid</em></span> it will disappear from all the configured views but no data will be lost.
                    </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.4.4.4"></a>Configuration of the External Data Source</h4></div></div></div><p>
                Before an external database can be searched and the results be saved at the ticket through the dynamic field,
                the credentials have to be stored in the configuration of the dynamic field.
            </p><p>
                </p><div class="figure"><a name="id-1.4.4.4.4.3.1"></a><p class="title"><b>Figure 3.17. Dynamic Field Database Admin screen</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/dynamicfield-database/AdminOverview.png" alt="Dynamic Field Database Admin screen"></div></div></div></div><p><br class="figure-break">
            </p><p>
                Type: The type of the desired database can be selected here. The field supports the default OTRS database
                types: MySQL, Oracle, PostgreSQL or MSSQL.
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        <span class="emphasis"><em>SID</em></span>: This option is only available for Oracle connections and will be shown or hidden automatically.
                        Within this option you have to enter the SID of your Oracle connection.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Driver</em></span>: This option is only available for ODBC connections and will be shown or hidden automatically.
                        Within this option you have to enter in the hostsystem previously configured ODBC driver to connect to the desired
                        MSSQL database.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Server</em></span>: The database host (hostname or IP-Address).
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Port</em></span>: The port of the database server.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Database</em></span>: Defines the desired target database of the DBMS. This database will be used for queries.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Table / View</em></span>: This table or view will be used for the queries.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>User</em></span>: The username for the database connection.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Password</em></span>: The user password for the database connection.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Identifier</em></span>: This select box will be automatically filled through <span class="emphasis"><em>Possible Values (description below)</em></span>. This
                        field represents the value which will be stored in the dynamic field.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Multiselect</em></span>: If this field is selected, it will be possible to store more than one value to the dynamic field.
                        Those values will be stored comma separated.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>CacheTTL</em></span>: This value defines the period of validity of the database cache in seconds. Equal queries to the database
                        will be answered through the cache (local filesystem) within this period instead of asking the database again.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Searchprefix</em></span>: This value will be put in the front of every search term while using the autocompletion to search the
                        database. Wildcard characters are supported as well. The searchprefix will be ignored during the detailed search, but
                        it is still possible to use wildcard characters in those masks.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Searchsuffix</em></span>: This value will be put in the end of every search term while using the autocompletion to search the
                        database. Wildcard characters are supported as well. The searchsuffix will be ignored during the detailed search, but
                        it is still possible to use wildcard characters in those masks.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Result Limit</em></span>: The entered integer value defines the maximum amount of allowed results during a database search. This includes
                        the autocompletion search as well as the detailed search.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Case Sensitive</em></span>: If this field is selected, case-sensitivity will take effect on searches.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Possible values</em></span>: As already explained the possible values will fill up the identifier field automatically, which
                        defines the value that will be stored in the dynamic field. Possible values can be created as much as needed (or at
                        least as many table columns as the database table has). The possible values defines the database columns to search
                        in. It is possible to set the column name, a description (label) the field should have, the needed data type and if
                        the field should be a search- or listfield.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Name</em></span>: The exact name of the database column which will be requested through the database queries.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Description</em></span>: The label of the field which will be displayed in the detailed search.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Datatype</em></span>: The data type which will be stored in the dynamic field. Possible values: TEXT, INTEGER or DATE.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Filter</em></span>: With the filter field, it is possible to choose a ticket attribute or a dynamic field as a filter for the related
                        column. If the dynamic field is bound to a related ticket, the attributes will be used for the filter mechanism, otherwise
                        the filters will be ignored.

                        If filter will be configured to a table column, only search results matching to the search term and the related ticket attribute
                        on exactly the configured column will be displayed.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Searchfield</em></span>: Indicates if a field should be included in the search requests.
                    </p></li><li class="listitem"><p>
                        <span class="emphasis"><em>Listfield</em></span>: Indicates if a field should be displayed in the results.
                    </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.4.4.5"></a>Screen Configuration</h4></div></div></div><p>
                Dynamic fields of type <span class="emphasis"><em>Database</em></span> have to be activated for the several masks in which they should be displayed like the other types of dynamic fields.
            </p><p>
                This can be done through <span class="emphasis"><em>Admin → System Administration → SysConfig</em></span>, in which <span class="emphasis"><em>Ticket</em></span> must be selected
                on the left hand side.
            </p><p>
                For every interface area (Frontend), in which the dynamic field of type <span class="emphasis"><em>Database</em></span> should be displayed, the admin
                has to configure it to fit his needs. Examples:
                </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                            <code class="literal">Frontend::Agent::Ticket::ViewZoom</code> for the ticket zoom view.
                        </p></li><li class="listitem"><p>
                            <code class="literal">Frontend::Agent::Ticket::ViewPhoneNew</code> for new phone tickets.
                        </p></li><li class="listitem"><p>
                            <code class="literal">Frontend::Agent::Ticket::ViewEmailNew</code> for new email tickets.
                        </p></li><li class="listitem"><p>
                            In each of these view configurations is an entry called <code class="literal">Ticket::Frontend::AgentTicket*###DynamicField</code>.
                            This configuration defines which dynamic field(s) should get displayed in this view. To add a dynamic field,
                            the internal name of the field has to be filled in the <span class="emphasis"><em>Key</em></span> field. The field <span class="emphasis"><em>Value</em></span> can take the values 0
                            (deactivated), 1 (active) and 2 (active and mandatory).
                        </p></li></ul></div><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.4.4.6"></a>Storage of Historical Data</h4></div></div></div><p>
                This feature offers a functionality to store historical data. For this to work it´s necessary to activate and set SysConfig options,
                as visibly in the following screenshot:
            </p><p>
                </p><div class="figure"><a name="id-1.4.4.4.6.3.1"></a><p class="title"><b>Figure 3.18. DynamicField Database - Historical data settings</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/dynamicfield-database/SysConfigStoreHistoricalData.png" alt="DynamicField Database - Historical data settings"></div></div></div></div><p><br class="figure-break">
            </p><p>
                In the configuration option for the <code class="literal">SourceDynamicField</code> it´s needed to fill in the already created dynamic (Database) field name, which will
                be used to gather the historical data. In the related option <code class="literal">TargetDynamicField</code> the field(s) <span class="emphasis"><em>Key</em></span> have to be filled with the table columns
                of the connected external database, which will be readout.
                For every column the related target dynamic field has to be configured in the field <span class="emphasis"><em>content</em></span>. The gathered data will be saved in these
                dynamic fields.
            </p><p>
                If the configuration is ready and active, the configured fields will be readout from the external database, since the source field gets a
                new value via the configured masks. The data will be searched by it´s stored identifier via an event module and the found values will be
                stored in the target dynamic fields.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.4.4.7"></a>Sysconfig Settings</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">AutoComplete::Agent###DynamicFieldDatabaseSearch</code></span></dt><dd><p>Group: <code class="literal">Framework</code>, Subgroup: <code class="literal">Frontend::Agent</code></p><p>
                            Defines the config options for the autocompletion feature.
                        </p></dd><dt><span class="term"><code class="literal">Ticket::EventModulePost###950-StoreHistoricalData</code></span></dt><dd><p>Group: <code class="literal">Ticket</code>, Subgroup: <code class="literal">Core::Ticket</code></p><p>
                            Updates dynamic fields, if configured ones will be updated.
                        </p></dd><dt><span class="term"><code class="literal">DynamicFieldDatabase::StoreHistoricalData###1-SourceDynamicField1</code></span></dt><dd><p>Group: <code class="literal">OTRSBusiness</code>, Subgroup: <code class="literal">Core</code></p><p>
                            Defines the source dynamic field for storing historical data.
                        </p></dd><dt><span class="term"><code class="literal">DynamicFieldDatabase::StoreHistoricalData###2-TargetDynamicFields1</code></span></dt><dd><p>Group: <code class="literal">OTRSBusiness</code>, Subgroup: <code class="literal">Core</code></p><p>
                            Defines the target dynamic fields for storing historical data.
                        </p></dd><dt><span class="term"><code class="literal">DynamicFieldDatabase::StoreHistoricalData###3-SourceDynamicField2</code></span></dt><dd><p>Group: <code class="literal">OTRSBusiness</code>, Subgroup: <code class="literal">Core</code></p><p>
                            Defines the source dynamic field for storing historical data.
                        </p></dd><dt><span class="term"><code class="literal">DynamicFieldDatabase::StoreHistoricalData###4-TargetDynamicFields2</code></span></dt><dd><p>Group: <code class="literal">OTRSBusiness</code>, Subgroup: <code class="literal">Core</code></p><p>
                            Defines the target dynamic fields for storing historical data.
                        </p></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="id-1.4.4.5"></a>Usage</h3></div></div></div><p>
            An exemplary usage of DynamicField Database is as follows:
        </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.4.5.3"></a>Searching and Saving Datasets - Autocompletion</h4></div></div></div><p>
                After the created dynamic fields are activated in the well known masks (like <code class="literal">ViewPhoneNew</code>, <code class="literal">ViewEmailNew</code>) a new text field
                appears with the name, the dynamic field got in the configuration.
                In this field it is possible to input searchterms and therefore execute a search over all configured database fields.
                Otherwise do a click on the link <span class="emphasis"><em>Detailed search</em></span> and start a detailed search in which the fields to search in are selected
                explicitly.
            </p><p>
                </p><div class="figure"><a name="id-1.4.4.5.3.3.1"></a><p class="title"><b>Figure 3.19. DynamicField Database - Test field</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/dynamicfield-database/SearchFieldEmpty.png" alt="DynamicField Database - Test field"></div></div></div></div><p><br class="figure-break">
            </p><p>
                Since search terms are typed in into the text field, a database search will be started over the configured columns and the
                result will displayed via an autocompletion below the text field. The more exact the search term is, the more exact will be
                the result (less result entries).
            </p><p>
                </p><div class="figure"><a name="id-1.4.4.5.3.5.1"></a><p class="title"><b>Figure 3.20. DynamicField Database - Autocomplete feature</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/dynamicfield-database/SearchFieldAutoCompletion.png" alt="DynamicField Database - Autocomplete feature"></div></div></div></div><p><br class="figure-break">
            </p><p>
                If the wished value will be displayed in the results, it can be selected via a mouse click or via the keyboard and
                therefore be added to the dynamic field results.
            </p><p>
                </p><div class="figure"><a name="id-1.4.4.5.3.7.1"></a><p class="title"><b>Figure 3.21. DynamicField Database - Selected items</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/dynamicfield-database/SearchFieldSelected.png" alt="DynamicField Database - Selected items"></div></div></div></div><p><br class="figure-break">
            </p><p>
                Via the link <span class="emphasis"><em>Details</em></span> a popup screen can be accessed, which offers detailed information about the whole result row.
                This information includes the line headers and the data. This information can be used to get an overview about the
                rest (of the not configured) columns or to compare data.
            </p><p>
                The added result entries can be removed via the minus button.
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="id-1.4.4.5.4"></a>Searching and Saving Datasets - Detailed Search</h4></div></div></div><p>
                The link <span class="emphasis"><em>Detailed search</em></span> opens a new modal dialog to start a new database search. In this mask it is possible
                to select the fields to search on explicitly.
            </p><p>
                </p><div class="figure"><a name="id-1.4.4.5.4.3.1"></a><p class="title"><b>Figure 3.22. DynamicField Database - Detailed search</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/dynamicfield-database/DetailedSearchMask.png" alt="DynamicField Database - Detailed search"></div></div></div></div><p><br class="figure-break">
            </p><p>
                By default the first available field is activated, but it´s also possible to remove available fields or add
                additional ones. Only activated and filled fields are considered for the search. Wildcard characters '*' are allowed
                in every single field.
            </p><p>
                The database search will be executed via the <span class="emphasis"><em>Start search</em></span> button and the results will be tabular displayed.
                If the search was successful, the results will be listed and one of the entries can be selected via a mouse click. The
                value will be added to the list of saved values afterwards.
            </p><p>
                </p><div class="figure"><a name="id-1.4.4.5.4.6.1"></a><p class="title"><b>Figure 3.23. DynamicField Database - Detailed search result</b></p><div class="figure-contents"><div class="screenshot"><div><img src="screenshots/dynamicfield-database/DetailedSearchResult.png" alt="DynamicField Database - Detailed search result"></div></div></div></div><p><br class="figure-break">
            </p><p>
                Independent of using the autocompletion or the detailed search, every single result can just selected ones. If an agent
                tries to select a value multiple times, a related warning message is displayed.
            </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dynamicfield-contact-with-data.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="otrs-business-solution-features.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="dynamicfield-webservice.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">The Dynamic Field <span class="emphasis"><em>Contact with Data</em></span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> The Dynamic Field <span class="emphasis"><em>Web Service</em></span></td></tr></table></div></body></html>
